<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Harry Wong, ing." />
  <meta name="author" content="Wilson Morales, ing." />
  <meta name="author" content="Flavio Hernandez, ing." />
  <meta name="author" content="Viviana M. Martinez, ing." />
  <meta name="dcterms.date" content="2023-07-26" />
  <meta name="keywords" content="SOA, madurez, gobierno, FNA" />
  <title>Modelo de Gobierno. Detalle de los recursos, herramientas, roles y participantes del gobierno SOA</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
  <!--
  Manubot generated metadata rendered from header-includes-template.html.
  Suggest improvements at https://github.com/manubot/manubot/blob/main/manubot/process/header-includes-template.html
  -->
  <meta name="dc.format" content="text/html" />
  <meta property="og:type" content="article" />
  <meta name="dc.title" content="Modelo de Gobierno. Detalle de los recursos, herramientas, roles y participantes del gobierno SOA" />
  <meta name="citation_title" content="Modelo de Gobierno. Detalle de los recursos, herramientas, roles y participantes del gobierno SOA" />
  <meta property="og:title" content="Modelo de Gobierno. Detalle de los recursos, herramientas, roles y participantes del gobierno SOA" />
  <meta property="twitter:title" content="Modelo de Gobierno. Detalle de los recursos, herramientas, roles y participantes del gobierno SOA" />
  <meta name="dc.date" content="2023-07-26" />
  <meta name="citation_publication_date" content="2023-07-26" />
  <meta property="article:published_time" content="2023-07-26" />
  <meta name="dc.modified" content="2023-07-26T20:07:47+00:00" />
  <meta property="article:modified_time" content="2023-07-26T20:07:47+00:00" />
  <meta name="dc.language" content="en-US" />
  <meta name="citation_language" content="en-US" />
  <meta name="dc.relation.ispartof" content="Manubot" />
  <meta name="dc.publisher" content="Manubot" />
  <meta name="citation_journal_title" content="Manubot" />
  <meta name="citation_technical_report_institution" content="Manubot" />
  <meta name="citation_author" content="Harry Wong, ing." />
  <meta name="citation_author_institution" content="Arquitecto SOA, Stefanini" />
  <meta name="citation_author" content="Wilson Morales, ing." />
  <meta name="citation_author_institution" content="Software, Aplicaciones" />
  <meta name="citation_author" content="Flavio Hernandez, ing." />
  <meta name="citation_author_institution" content="SOA, Arquitectura" />
  <meta name="citation_author" content="Viviana M. Martinez, ing." />
  <meta name="citation_author_institution" content="Analista, Proyectos" />
  <link rel="canonical" href="https://hwong23.github.io/fna-dd-f2-e1/" />
  <meta property="og:url" content="https://hwong23.github.io/fna-dd-f2-e1/" />
  <meta property="twitter:url" content="https://hwong23.github.io/fna-dd-f2-e1/" />
  <meta name="citation_fulltext_html_url" content="https://hwong23.github.io/fna-dd-f2-e1/" />
  <meta name="citation_pdf_url" content="https://hwong23.github.io/fna-dd-f2-e1/manuscript.pdf" />
  <link rel="alternate" type="application/pdf" href="https://hwong23.github.io/fna-dd-f2-e1/manuscript.pdf" />
  <link rel="alternate" type="text/html" href="https://hwong23.github.io/fna-dd-f2-e1/v/4b97708f726a3fd2c91ce7a6fbc55eb70a540e3a/" />
  <meta name="manubot_html_url_versioned" content="https://hwong23.github.io/fna-dd-f2-e1/v/4b97708f726a3fd2c91ce7a6fbc55eb70a540e3a/" />
  <meta name="manubot_pdf_url_versioned" content="https://hwong23.github.io/fna-dd-f2-e1/v/4b97708f726a3fd2c91ce7a6fbc55eb70a540e3a/manuscript.pdf" />
  <meta property="og:type" content="article" />
  <meta property="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/png" sizes="192x192" href="https://manubot.org/favicon-192x192.png" />
  <link rel="mask-icon" href="https://manubot.org/safari-pinned-tab.svg" color="#ad1457" />
  <meta name="theme-color" content="#ad1457" />
  <!-- end Manubot generated metadata -->
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Modelo de Gobierno. Detalle de los recursos, herramientas, roles y participantes del gobierno SOA</h1>
</header>
<p><small><em>Este producto PR02 (<a href="https://hwong23.github.io/fna-dd-f2-e1/v/4b97708f726a3fd2c91ce7a6fbc55eb70a540e3a/">Web</a>)
está basada en el resultado de la consultoría “Arquitectura E-Service”,
<a href="https://stefaninilatam.sharepoint.com/:f:/r/sites/PROYECTOARQUITECTURAE-SERVICEFNA/Documentos%20compartidos/General/Repositorio%20SOA/Procesos%20Fase%20II/181-2020.%20E-SERV.%20Fase%202-ETAPA%200.%20docx?csf=1&amp;web=1&amp;e=BiNcBP">Sharepoint STEF@4b97708</a>
del July 26, 2023.
</em></small></p>
<div class="line-block">   <strong>Versión</strong> del producto 1.4b97708 de 26 Jul 2023</div>
<p><br></p>
<h2 id="autores">Autores</h2>
<ul>
<li><p><strong>Harry Wong, ing.</strong>
<br>
· <img src="images/github.svg" class="inline_icon" width="16" height="16" alt="Usuario" />
<a href="https://github.com/e_hwong">e_hwong</a>
<br>
<small>
Arquitecto SOA, Stefanini
</small></p></li>
<li><p><strong>Wilson Morales, ing.</strong>
<br>
· <img src="images/github.svg" class="inline_icon" width="16" height="16" alt="Usuario" />
<a href="https://github.com/wmorales">wmorales</a>
<br>
<small>
Software, Aplicaciones
</small></p></li>
<li><p><strong>Flavio Hernandez, ing.</strong>
<br>
· <img src="images/github.svg" class="inline_icon" width="16" height="16" alt="Usuario" />
<a href="https://github.com/fhernandez">fhernandez</a>
<br>
<small>
SOA, Arquitectura
</small></p></li>
<li><p><strong>Viviana M. Martinez, ing.</strong>
<br>
· <img src="images/github.svg" class="inline_icon" width="16" height="16" alt="Usuario" />
<a href="https://github.com/vmmartinez">vmmartinez</a>
<br>
<small>
Analista, Proyectos
</small></p></li>
</ul>
<div id="correspondence">
<p>✉ — Enviar mensajes a Harry Wong, ing. &lt;e_hwong@stefanini.com&gt;.</p>
</div>
<p><br></p>
<h2 id="objetivo-del-documento">Objetivo del Documento</h2>
<p>Entrega del producto 2 (PR02) del proyecto Gobierno SOA: Políticas, flujos de trabajo y personas que ejercitan y conforman (cumplen) con el gobierno SOA del FNA a desplegar a cargo de la oficina de arquitectura.</p>
<h2 class="page_break_before" id="control-de-cambios">Control de Cambios</h2>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>PRY01 Gobierno SOA FNA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, E-Service, FNA, Análisis de brecha, GAP, Comparativa</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td>1.4b97708 del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">N003a Vista Segmento SOA FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<div style="page-break-before: always;">

</div>
<div style="page-break-before: always;">

</div>
<blockquote>
<p>E-Service. Fase II</p>
<p>PRY01 Gobierno SOA. Contenido de los Productos Contractuales</p>
<p>Contrato 1812020</p>
<p>FNA, Stefanini</p>
<p>26 Jul 2023</p>
<p><strong>Versión</strong> 1.4b97708</p>
</blockquote>
<p><br></p>
<h1 id="producto-2-pr02.-modelo-de-gobierno.-detalle-de-los-recursos-herramientas-roles-y-participantes-del-gobierno-soa">Producto 2: PR02. Modelo de Gobierno. Detalle de los recursos, herramientas, roles y participantes del gobierno SOA</h1>
<p>Políticas y procedimiento, paquetes de trabajo, identificación de personas, roles y herramientas a desplegar a cargo de la oficina de arquitectura del FNA por concepto de la instauración del gobierno.</p>
<p><strong>Nota</strong>: los análisis de este producto están dirigidos a cumplir los objetivos del proyecto PRY01, Gobierno SOA: desarrollo, gestión, gobierno de arquitectura y adopción.</p>
<p><br></p>
<h2 id="justificación">Justificación</h2>
<p>El resultados del análisis de riesgos técnicos realizado en la Fase I de la consultoría E-Service, causados en parte por los retos de complejidad y agilidad que enfrenta el FNA, los cuales configuran una red de aplicaciones y servicios que aumenta el impacto, el esfuerzo y la incertidumbre de los cambios en las arquitecturas del Fondo, obliga a crear la oficina de arquitectua del FNA y a desplegar las mejoras en los flujos críticos de trabajo a cargo esta.</p>
<h2 id="contenidos">Contenidos</h2>
<ol type="1">
<li>Modelo de gobierno SOA del FNA: actores, información y procedimientos</li>
<li>Flujo de trabajo de oficina de arquitectura del FNA</li>
<li>Matriz de responsabilidades oficina de arquitectura</li>
<li>Procedimientos base del modelo de gobierno / oficina de arquitectura</li>
<li>Anexos. Referencia documental del Gobierno SOA del FNA</li>
</ol>
<p><br></p>
<h2 id="criterios-de-aceptación">Criterios de Aceptación</h2>
<ul>
<li>Entendimiento funcional y operativo de la oficina de arquitectura FNA</li>
<li>Matriz de roles y procedimientos de la oficina de arquitetura FNA</li>
</ul>
<p><br></p>
<h2 id="modelo-de-implementación-del-pry01">Modelo de Implementación del PRY01</h2>
<div id="fig:c7500d6c-7d10-4e49-b894-6e4e70ec5df0" class="fignos">
<figure>
<img src="images/pry1gobierno.jpg" alt="Imagen 1: Plan de Implementación del Proyecto Hoja de Ruta E-Service FNA, 2023. Abril 2023 a Agosto 2023" />
<figcaption aria-hidden="true"><span>Imagen 1:</span> Plan de Implementación del Proyecto Hoja de Ruta E-Service FNA, 2023. Abril 2023 a Agosto 2023</figcaption>
</figure>
</div>
<p><em>Fuente: Elaboración propia.</em></p>
<p><br></p>
<hr />
<div style="page-break-before: always;">

</div>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Gobierno SOA del FNA: <strong>Modelo de Gobierno y CCF</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Contexto, Áreas, Procesos, Objetivos</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td><strong>1.4b97708</strong> del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h1 id="antecedentes-del-gobierno-soa-del-fna">Antecedentes del Gobierno SOA del FNA</h1>
<p>Los resultados de la consultoría E-Service, Fase I, 2022 señalan la <em>necesidad de manejo de la complejidad creciente en las soluciones del FNA</em> (ver <a href="https://stefaninilatam.sharepoint.com/SitePages/Home.aspx">Resultados E-Service, Fase I</a>). Sobre esa base, El Fondo Nacional del Ahorro estableció como pilar tecnológico la implementación obligatoria del Gobierno SOA, de forma tal, que preserve la continuidad de servicio y permita identificar y gestionar las amenazas y riesgos que impacten el desarrollo y evolución de las arquitecturas de software del Fondo, tarea base para los planes de alineación y puesta marcha de futuras soluciones y mejoras.</p>
<h1 id="modelo-de-gobierno-soa-del-fna-actores-información-y-procedimientos">Modelo de Gobierno SOA del FNA: Actores, Información y Procedimientos</h1>
<p>El gobierno SOA del FNA, objeto de este proyecto, tiene impacto general en la empresa. Sin embargo, se desarrolla desde un centro condicionado por el alcance de este proyecto. Esta versión del Gobierno SOA del FNA nace en las partes e ítems de la arquitectura de software y de servicios del FNA consignadas en la vista de segmento de la empresa (ver Vista de Contextual, segmento de la empresa, <a href="https://https://stefaninilatam.sharepoint.com/SitePages/Home.aspx/fna-dd-f2-pry1/manuscript.pdf">PR01. E-Service, Fase II</a>) pero no se agota ahí porque es necesario extenderlo a actores, interesados, usuarios y entidades relacionados con las partes de la arquitectura del FNA contenidas en la vista de segmento.</p>
<p>A continuación, presentamos el modelo base de gobierno de arquitecturas SOA para el FNA primera edición, versión 0.1, la manera cómo ha evolucionado en el FNA, y sus elementos de gobierno, los actores, la información que deben generar y las funciones que este postula.</p>
<h1 id="modelo-de-gobierno-soa-del-fna.-versión-0.2">Modelo de Gobierno SOA del FNA. Versión 0.2</h1>
<p>La versión inicial del modelo de Gobierno SOA del FNA, propuesto en la Fase I de E-Service establece apenas las bases de lo que debe ser un marco de trabajo para gobierno SOA del FNA. Esta versión hace foco en un asunto general: <em>responder y gestionar la evolución de la arquitectura de referencia SOA actual del Fondo Nacional del Ahorro</em>, y deja para siguientes versiones de este marco de trabajo de gobierno SOA la inclusión de otras problemáticas que demanden mayor gobierno.</p>
<div id="fig:d442a898-6afb-48ee-8c2b-0b576dc3d822" class="fignos">
<figure>
<img src="images/modelo-gob.png" alt="Imagen 2: Modelo de Gobierno SOA del FNA, emisión inicial, versión 0.2. Gestiona la evolución de las arquitecturas de servicios SOA." />
<figcaption aria-hidden="true"><span>Imagen 2:</span> Modelo de Gobierno SOA del FNA, emisión inicial, versión 0.2. Gestiona la evolución de las arquitecturas de servicios SOA.</figcaption>
</figure>
</div>
<p><em>Fuente: Diagnóstico SOA. E-Service (2022).</em></p>
<p><br></p>
<p>Este modelo de gobierno está diseñado para enfrentar el caso particular del FNA que es aumentar la relevancia de los de modelos de arquitectura, que funcionen como lenguaje común entre los autores y actores, y la graduación del uso del repositorio de artefactos de arquitectura e ingeniería. En este modelo de gobierno, v0.5 que diseñamos para la empresa, <em>el repositorio de arquitectura es el corazón del gobierno</em>; lo mismo para la oficina de arquitectura del FNA. Es también la base de los análisis de ingeniería que se comparten con proveedores y contratistas del Fondo Nacional del Ahorro.</p>
<p>El requerimiento de arquitectura sea un Caso de Uso (nivel 0: negocio), una inversión de TI, sea adquisición, migración, consultoría (nivel 1:incidencia), o un requerimiento no funcional (nivel 2:ingeniería), es la entrada principal del modelo de gobierno.</p>
<p><br></p>
<div style="page-break-before: always;">

</div>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Modelo de Gobierno SOA. v0.5: <strong>Objetivos del Gobierno</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Contexto, Áreas, Procesos, Objetivos</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td><strong>1.4b97708</strong> del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="objetivo-principal-del-gobierno-soa-del-fna">Objetivo Principal del Gobierno SOA del FNA</h2>
<p>Una vez identificadas estas problemáticas existentes en la empresa FNA, y que podemos resumir en 1) riesgo tecnológico, 2) complejidad y 3) nivel de formalización de la arquitectura dentro de los desarrollos e implementaciones del FNA, el gobierno SOA propuesto para el Fondo, versión 0.5, tiene un objetivo general que es el siguiente</p>
<blockquote>
<p>El gobierno SOA es el vigía de las relaciones entre las áreas de negocio (la vicepresidencia de operaciones y la vicepresidencia de crédito del FNA) y la implementación y diseño de soluciones SOA. El gobierno SOA del Fondo debe asistir en la aplicación y ejecución de un régimen (estándar) de implementación, observación y puesta en marcha de soluciones SOA.</p>
</blockquote>
<div id="fig:objetivos-id" class="fignos">
<figure>
<img src="images/GobiernoSOA.3n1.jpg" alt="Imagen 3: Objetivos principal y específicos del Gobierno SOA del FNA, versión 0.5." />
<figcaption aria-hidden="true"><span>Imagen 3:</span> Objetivos principal y específicos del Gobierno SOA del FNA, versión 0.5.</figcaption>
</figure>
</div>
<p><em>Fuente: Elaboración propia.</em></p>
<p><br></p>
<p>Para sustentar este objetivo general, que puede resumirse en “mantener y gestionar la relación de negocio con la arquitectura TI del FNA”, debemos consignar objetivos específicos, tales que sean asignables y responsabilizarles a los actores principales del gobierno v0.5. Estos objetivos específicos, como mínimo, son los que describimos a continuación.</p>
<h2 id="objetivos-específicos-del-gobierno">Objetivos Específicos del Gobierno</h2>
<p>Los objetivos asignables a los roles constituyentes de la oficina de arquitectura del FNA que garantizan el cumplimiento del objetivo general del gobierno son los siguientes.</p>
<ol type="1">
<li>G-OBJ1. Vigilancia del riesgo tecnológico</li>
<li>G-OBJ2. Vigilar el crecimiento de la complejidad y el impacto de los nuevos cambios en la arquitectura SOA del FNA</li>
<li>G-OBJ3. Vigilar y perseguir el aumento de los índices de adopción, adaptación y efectividad SOA</li>
</ol>
<p><br></p>
<p>Los objetivos principales y específicos se encuentran ilustrados arriba, en la imagen <em>Objetivos principal y específicos del Gobierno SOA del FNA</em>, arriba Fig. <a href="#fig:objetivos-id">3</a>. A continuación, trataremos detalles de cada objetivo específico.</p>
<h3 id="g-obj1.-vigilancia-del-riesgo-tecnológico">G-OBJ1. Vigilancia del Riesgo Tecnológico</h3>
<p>La definición de riesgos tecnológico que perseguimos en este ejercicio de diseño de gobierno SOA tiene que ver únicamente con los dominios de arquitectura<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, a los que estos impacten. Esta clasificación de los riesgos técnicos, y para efectos del ejercicio de gobierno objeto de este proyecto, es eficaz porque le facilita a cada arquitecto focalizar y mitigar aquellos riesgos relacionados con su dominio particular, que en este contexto consideramos como dominios de arquitectura a: servicios, aplicaciones, datos e infraestructura. Los riesgos transversales, como los causados por la deuda técnica, los clasificaremos en el dominio de servicios.</p>
<p>Una vez organizado los riegos técnicos por dominio, cada uno deberá: hacer seguimiento a la inversión tecnológica, la cual involucra a los proveedores del FNA y colaboración con externos; segundo, evaluar y constatar la implementación de herramientas de software, la cual podría limitarse a servicios SOA; y finalmente, controlar la adopción de nuevos diseños, nuevos marcos de trabajo, librerías o componentes de terceros.</p>
<p>De este objetivo enfatizamos el control sobre la inversión de TI, que en la práctica trata sobre vigilar la efectividad y factibilidad de los proyectos SOA de la organización mediante los resultados del
1. análisis de factibilidad SOA
1. y la efectividad esperada de la inversión (cálculo del costo / beneficio)</p>
<p>Ambos análisis deben quedar relacionados en el repositorio de la oficina de arquitectura del FNA, objeto de este proyecto.</p>
<h4 id="niveles-de-riesgo-técnico-para-del-fna">Niveles de Riesgo Técnico para del FNA</h4>
<p>Aún cuando tengamos la clasificación de riesgos técnicos, requerimos contar con niveles de criticidad a los riesgos técnicos (organizados por dominio de arquitectura). Los niveles que consideramos pertinentes para este trabajo de gobierno SOA del FNA son riesgo de nivel inicial y nivel residual.</p>
<p>La definición de cada nivel de riesgo es como sigue.
* Riesgo Técnico Inicial: nivel de riesgo al momento de su identificación en las arquitecturas del FNA. El riesgo permanece en este nivel antes y durante la implementación de las acciones de mitigación.
* Riesgo Técnico Residual: este nivel que toma el riesgo técnico luego de la implementación de las acciones de mitigación.</p>
<h3 id="g-objs2.-vigilar-la-complejidad-e-impacto-en-la-arquitectura-soa-del-fondo">G-OBJS2. Vigilar la Complejidad e Impacto en la Arquitectura SOA del Fondo</h3>
<p>Una de las mayores limitaciones para diseñar soluciones para los sistemas de información, aplicaciones y herramientas de software es tener las habilidades y herramientas para entenderlos (antes de diseñar). A medida que los sistemas, y los programas debajo de estos, evolucionan y adquieren más características, los sistemas y las aplicaciones de software se vuelven complicados, con sutiles y crecientes dependencias entre sus componentes. Con el tiempo, la complejidad se acumula, y se vuelve cada vez más difícil para los ingenieros y desarrolladores, el mantener organizado (y en su conocimiento) todos los factores relevantes de la implementación mientras se encargan de modificar los sistemas. Esto ralentiza el desarrollo y conduce a fallos, que a su vez aumenta la lentitud del desarrollo agregándole costos al proceso. La complejidad incrementa inevitablemente. Mientras más componentes tenga el sistema (tamaño) y más personas trabajen en él (actores), mayor la dificultad para manejar la complejidad.</p>
<p>Desarrollar las habilidades y herramientas para representar, organizar y divulgar las ideas funcionales y sus detalles de implementación es lo que llamamos gestionar la complejidad en este contexto.</p>
<h3 id="g-obj3.-vigilar-y-alcanzar-los-índices-de-efectividad-soa">G-OBJ3. Vigilar y Alcanzar los Índices de Efectividad SOA</h3>
<p>Para el modelo de gobierno del FNA vamos a utilizar dos sistemas de índices de rendimiento. Para el primero, equiparamos la definición de efectividad de arquitectura con el modelo de madurez OSIMM de TOGAF. A partir de ahí, desarrollaremos los índices sujetos de este objetivo. En este sentido, tomaremos como referencia la versión inicial de estos índices desarrollados en los análisis de madurez realizado en E-Service, Fase 1. A saber:</p>
<div id="fig:32e09449-dc9a-4d41-a7b5-258de955761e" class="fignos">
<figure>
<img src="images/madurezInfo_graf.png" alt="Imagen 4: índices de efectividad de las arquitecturas del FNA." />
<figcaption aria-hidden="true"><span>Imagen 4:</span> índices de efectividad de las arquitecturas del FNA.</figcaption>
</figure>
</div>
<p><em>Fuente: Diagnóstico SOA. E-Service (2022).</em></p>
<p><br></p>
<p>Es deber de este objetivo establecer y desplegar los procedimientos para garantizar el aumento de estos índices de efectividad, así como monitorear el rendimiento (KPI) de los procesos de arquitectura involucrados y definidos más adelante.</p>
<p>El segundo sistema de índices que utilizaremos es el desarrollado por la Fase I de E-Service. En este, establecemos como indicador clave <em>que el FNA mantenga el vínculo de sus activos tanto de infraestructura como los activos SOA con el contexto de negocio de las vicepresidencias de Operaciones y de Crédito</em>. Esto es, el principal indicador del gobierno SOA es la existencia y la vigencia de los vínculos entre los contextos de negocio y la arquitectura de referencia SOA FNA, y su tecnología.</p>
<p>Este solo indicador del gobierno SOA, el del vínculo de los contextos negocio-tecnología SOA, que es útil también para otras disciplinas de gestión TI, <em>identifica y justifica los costos de un cambio en relación al Valor de negocio que pueda traer</em>. Sirve además de base para los procesos la mayoría de las decisiones de cambio, mejora, inversión, reforma, y otras propias de la gestión de la tecnología SOA. También funciona para medir la confiabilidad de los análisis que sobre los modelos se realicen. <em>Es por estas razones que para el Fondo este es el principal indicador de gobierno SOA a desarrollar</em>.</p>
<p>De todos los indicadores de gestión del gobierno, el del Vínculo Contexto Negocio-SOA es el más importante para el FNA. Para mantener el puntaje de este indicador alto debe recurrir a la actualización y mantenimiento del repositorio de arquitectura. En la medida en que este repositorio capture la mayor cantidad de información de los contextos referidos, el indicador aumentará, a la vez que el repositorio será un activo clave para todas las operaciones de gestión de TI del FNA.</p>
<div id="fig:7f586c41-b7e8-40ff-8829-0b6ef1508299" class="fignos">
<figure>
<img src="images/indicadoresgob.png" alt="Imagen 5: Indicador principal del gobierno SOA: KPI de Vínculo Contexto Negocio-SOA. Identifica y justifica los cambios SOA en relación al Valor de negocio." />
<figcaption aria-hidden="true"><span>Imagen 5:</span> Indicador principal del gobierno SOA: KPI de Vínculo Contexto Negocio-SOA. Identifica y justifica los cambios SOA en relación al Valor de negocio.</figcaption>
</figure>
</div>
<p><em>Fuente: Diagnóstico SOA. E-Service (2022).</em></p>
<p><br></p>
<h2 id="otros-objetivos-del-gobierno-soa">Otros Objetivos del Gobierno SOA</h2>
<p>Para complementar la lista de objetivos específicos del gobierno SOA, v0.5, del FNA, la lista siguiente expone objetivos suplementarios, o que aplican bajo ciertas condiciones o relaciones con otros proyectos transformadores, como la Arquitectura Empresarial, transformación digital, arquitectura de negocio, entre otros.</p>
<ol type="1">
<li>Desde el área, o rol, de gobierno SOA del FNA, servir de guía en la entrega de soluciones de software conforme a la arquitectura de referencia estregada por esta consultoría.</li>
<li>Informar de desviaciones en la relación de efectividad de costos de los proyectos SOA del FNA en términos del área de inefectividad de costo e inviabilidad SOA.</li>
<li>Hacer el seguimiento de las implementaciones de los cambios en la arquitectura de referencia: phase G, Implementation Governance, TOGAF ADM.</li>
</ol>
<p><br></p>
<p>La imagen siguiente presenta el conjunto de objetivos principales y secundarios que el Gobierno SOA del FNA, versión 0.5, debe perseguir y cumplir.</p>
<div id="fig:71c42987-b408-41ab-902b-98c98aab1fc7" class="fignos">
<figure>
<img src="images/gobiernobjetivos.png" alt="Imagen 6: Objetivos secundarios del gobierno SOA del FNA" />
<figcaption aria-hidden="true"><span>Imagen 6:</span> Objetivos secundarios del gobierno SOA del FNA</figcaption>
</figure>
</div>
<p><em>Fuente: Diagnóstico SOA. E-Service (2022)</em></p>
<p><br></p>
<h1 id="modelo-de-gobierno-soa-del-fna.-versión-0.5">Modelo de Gobierno SOA del FNA. Versión 0.5</h1>
<p>Creamos una versión del modelo de gobierno SOA del FNA que incorpora el resultado del diagnóstico de susceptibilidad de gobierno realizado sobre los flujos críticos de trabajo (CCF) elaborados en la Etapa 0 de este proyecto (ver <a href="https://stefaninilatam.sharepoint.com/SitePages/Home.aspx">Flujos Críticos de Trabajo FNA</a>) con el fin de dar darle gestión a las problemáticas encontradas en dicho diagnóstico. El diagrama siguiente presenta el modelo de gobierno resultante.</p>
<p>La nueva versión del modelo de gobierno del FNA incorpora las problemáticas encontradas en el producto 1 de este proyecto.</p>
<div id="fig:1c9f8376-466c-4f85-9545-e30ae86f8269" class="fignos">
<figure>
<img src="images/modelogob05.png" alt="Imagen 7: Versión 0.5 del Modelo de Gobierno del FNA." />
<figcaption aria-hidden="true"><span>Imagen 7:</span> Versión 0.5 del Modelo de Gobierno del FNA.</figcaption>
</figure>
</div>
<p><em>Fuente: Elaboración propia.</em></p>
<p><br></p>
<p>Esta nueva versión del modelo de gobierno está diseñado para enfrentar el caso particular del FNA que es aumentar la relevancia de los de modelos de arquitectura, que funcionen como lenguaje común entre los autores y actores, y la graduación del uso del repositorio de artefactos de arquitectura e ingeniería. En este modelo de gobierno, v0.5 que diseñamos para la empresa, <em>el repositorio de arquitectura es el corazón del gobierno</em>; lo mismo para la oficina de arquitectura del FNA. Es también la base de los análisis de ingeniería que se comparten con proveedores y contratistas del Fondo Nacional del Ahorro.</p>
<p>El requerimiento de arquitectura sea un Caso de Uso (nivel 0: negocio), una inversión de TI, sea adquisición, migración, consultoría (nivel 1:incidencia), o un requerimiento no funcional (nivel 2:ingeniería), es la entrada principal del modelo de gobierno.</p>
<h2 id="elementos-del-modelo-de-gobierno-versión-0.5">Elementos del Modelo de Gobierno, versión 0.5</h2>
<p>Los elementos que describiremos del gobierno de las arquitecturas del FNA en este capítulo son aquellos elementos mínimos que permiten el funcionamiento de esta versión. Definimos tres categorías con las que organizamos la lista de esos elementos: actores, información y funciones.</p>
<p>Descripción de los elementos del modelo de gobierno, y categorías en las que están organizados.</p>
<div id="tbl:modelo1-id" class="tablenos">
<table id="tbl:modelo1-id">
<caption><span>Tabla 1:</span> Elementos del Modelo de Gobierno FNA, versión 0.5. Herramientas requeridas por el gobierno. </caption>
<colgroup>
<col style="width: 7%" />
<col style="width: 4%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Nombre</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Bitácora Arquitectura</strong></td>
<td>application-component</td>
<td>La bitácora de decisiones de arquitectura (ADR, por sus siglas en inglés) es una herramienta para ejercitar el proceso de toma de decisiones de la oficina. Mediante esta es posible estructurar y hacer seguimiento (versión y trazabilidad) a las discusiones de la oficina de arquitectura del FNA. Cumple el objetivo de materializar el consenso elevándolo a un grado oficial, al tiempo que reúne a los arquitectos alrededor del mismo contexto, problema, restricciones, conveniencia (pro/con), alternativas y opciones de solución.</td>
</tr>
<tr class="even">
<td><strong>Documentación Técnica</strong></td>
<td>application-component</td>
<td>Emitir documentos homogéneos. Aplicación de estilos permitidos de documentación técnica. Normalización de canal y medios de publicación de documentación técnica: HTML, markdown y PDF.</td>
</tr>
<tr class="odd">
<td><strong>Gestor de Requerimientos de arquitectura</strong></td>
<td>application-component</td>
<td></td>
</tr>
<tr class="even">
<td><strong>Modelo Arquitectura</strong></td>
<td>application-component</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Repositorio Análisis</strong></td>
<td>application-component</td>
<td></td>
</tr>
<tr class="even">
<td><strong>Repositorio SOA</strong></td>
<td>application-component</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>GOB04. Repositorio Artefactos FNA</strong></td>
<td>application-interaction</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="tbl:modelo2-id" class="tablenos">
<table id="tbl:modelo2-id">
<caption><span>Tabla 2:</span> Elementos del Modelo de Gobierno FNA, versión 0.5. Productos requeridos por el gobierno. </caption>
<colgroup>
<col style="width: 7%" />
<col style="width: 4%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Nombre</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Especificaciones</strong></td>
<td>artifact</td>
<td></td>
</tr>
<tr class="even">
<td><strong>Requerimiento</strong></td>
<td>contract</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Decisión Arq.</strong></td>
<td>data-object</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="tbl:modelo3-id" class="tablenos">
<table id="tbl:modelo3-id">
<caption><span>Tabla 3:</span> Elementos del Modelo de Gobierno FNA, versión 0.5. Actividades de análisis requeridas por el gobierno. </caption>
<colgroup>
<col style="width: 7%" />
<col style="width: 4%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Nombre</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ALS01. Complejidad</strong></td>
<td>assessment</td>
<td></td>
</tr>
<tr class="even">
<td><strong>ALS02. Impacto</strong></td>
<td>assessment</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>ALS03. Costo / Beneficio</strong></td>
<td>assessment</td>
<td></td>
</tr>
<tr class="even">
<td><strong>ALS04. Específicos</strong>*</td>
<td>assessment</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="tbl:modelo4-id" class="tablenos">
<table id="tbl:modelo4-id">
<caption><span>Tabla 4:</span> Elementos del Modelo de Gobierno FNA, versión 0.5. Áreas del FNA involucradas con el gobierno. </caption>
<colgroup>
<col style="width: 7%" />
<col style="width: 4%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Nombre</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Arquitectura Empresarial FNA</strong></td>
<td>business-interaction</td>
<td></td>
</tr>
<tr class="even">
<td><strong>Comité de Cambios FNA</strong></td>
<td>business-interaction</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Comité de arquitectura FNA</strong></td>
<td>business-interaction</td>
<td></td>
</tr>
<tr class="even">
<td><strong>Gobierno TI FNA</strong></td>
<td>business-interaction</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Oficina Arquitectura FNA</strong></td>
<td>business-interaction</td>
<td>Es la manifestación material del gobierno SOA del FNA. La oficina de arquitectura es el órgano ejecutivo del gobierno SOA, y por tanto, debe contar con recursos materiales (presupuesto), físicos y teóricos, tanto para su puesta en marcha, como para desplegar el gobierno en la empresa y hacerlo presencial a los proveedores de la empresa también. La oficina de arquitectura es la presencia del gobierno a lo largo (áreas) y ancho (proveedores) de la empresa.</td>
</tr>
<tr class="even">
<td><strong>Evento de cambio arquitectura SOA</strong></td>
<td>business-event</td>
<td>Sucede un evento en que la arquitectura SOA, o alguna de los componentes de la arquitectura de referencia del FNA es imputado por un cambio. El cambio puede ser motivado por un requerimiento de arquitectura (TOGAF), una necesidad de negocio, o la adquisición de infraestructura (inversión de TI).</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="tbl:modelo5-id" class="tablenos">
<table id="tbl:modelo5-id">
<caption><span>Tabla 5:</span> Elementos del Modelo de Gobierno FNA, versión 0.5. Solicitudes al gobierno. </caption>
<colgroup>
<col style="width: 7%" />
<col style="width: 4%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Nombre</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Caso Uso de Negocio</strong></td>
<td>business-object</td>
<td></td>
</tr>
<tr class="even">
<td><strong>Inversión TI</strong></td>
<td>business-object</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Requerimiento de Arquitectura</strong></td>
<td>business-object</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="tbl:modelo1-id" class="tablenos">
<table id="tbl:modelo1-id">
<caption><span>Tabla 6:</span> Elementos del Modelo de Gobierno FNA, versión 0.5. Información expedida por el gobierno. </caption>
<colgroup>
<col style="width: 7%" />
<col style="width: 4%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th>Nombre</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Contrato de Gobierno SOA FNA</strong></td>
<td>contract</td>
<td></td>
</tr>
<tr class="even">
<td><strong>Declaración Trabajo Arquitectura</strong></td>
<td>contract</td>
<td>La declaración de trabajo de arquitectura define el alcance y el enfoque que se utilizará para completar un ciclo de desarrollo de arquitectura (ver flujo de trabajo de oficina de arquitectura FNA). Debe contener los elementos contra los que se medirá la ejecución exitosa del proyecto/cambio de arquitectura. Es además el insumo para los acuerdos contractuales entre el proveedor y la empresa.</td>
</tr>
</tbody>
</table>
</div>
<div style="page-break-before: always;">

</div>
<p><br></p>
<p>Una vez definido esta nueva versión del modelo de gobierno del FNA, y descrito sus elementos, debemos dotarlo de un sentido operativo. Esto se hace mediante la declaración de las funciones y objetivos del gobierno a los que este modelo debe ceñirse y responder. De igual manera, los roles que constituyen la oficina de arquitectura del FNA aportan a este sentido operativo.</p>
<p><br></p>
<h2 id="bitácora-de-decisiones-de-arquitectura">Bitácora de Decisiones de Arquitectura</h2>
<p>La bitácora de decisiones es una herramienta para gestionar la toma de decisiones de arquitectura. Por tal razón, estructurar y genera gestión seguimiento, (versión y trazabilidad) a las discusiones de la oficina de arquitectura del FNA. El objetivo de esta herramienta es el de consensuar a todos los arquitectos alrededor del mismo contexto, problema, restricciones, conveniencia (pro/con), alternativas y opciones de solución.</p>
<p>Para poner en marcha una especialización de la ADR (bitácora de arquitectura), vea <a href="https://stefaninilatam.sharepoint.com/SitePages/Home.aspx">Consideraciones para Operar la Bitácora</a>.</p>
<h2 id="declaración-de-trabajo-de-arquitectura">Declaración de Trabajo de Arquitectura</h2>
<p>La declaración de trabajo de arquitectura define el alcance y el enfoque que se utilizará para completar un ciclo de desarrollo de arquitectura (ver flujo de trabajo de oficina de arquitectura FNA). Debe contener los elementos contra los que se medirá la ejecución exitosa del proyecto/cambio de arquitectura.</p>
<p>El objetivo de esta información es ser el insumo para la toma de decisiones de la gestión de tecnología del FNA, y servir en el dimensionamiento y gestión de los acuerdos contractuales entre el proveedor y la empresa.</p>
<p>La declaración de trabajo puede contener, como mínimo,</p>
<ul>
<li>Descripción del trabajo/solicitud</li>
<li>Contexto tras el trabajo (solicitud) de arquitectura</li>
<li>Denominación del proyecto de arquitectura y alcance (una vez aprobado el cambio)</li>
<li>Prerrequisitos para la ejecución del cambio (Visión)</li>
<li>Esquema de trabajo del cambio en cada dominio y componente de la arquitectura</li>
<li>Equipo de trabajo, roles, responsabilidades y entregables</li>
<li>Criterios de aceptación</li>
<li>Plan de trabajo y calendario</li>
<li>Aprobaciones
<br></li>
</ul>
<h2 id="repositorio-soa">Repositorio SOA</h2>
<h2 id="repositorio-análisis">Repositorio Análisis</h2>
<h2 id="documentación-técnica">Documentación Técnica</h2>
<p>Esta capacidad de documentación técnica es requerida para emitir documentos homogéneos. Este componente debe evitar la proliferación y uso de estilos no permitidos de documentación técnica entre las oficinas de arquitectura y grupos de trabajo involucrados con estas.</p>
<p>Otra función de esta capacidad es la normalización de la publicación y el uso del medio (tipo de documentos HTML, markdown y PDF) y canal oficial de divulgación y distribución de contenidos de la oficina de arquitectura.</p>
<p><br></p>
<div style="page-break-before: always;">

</div>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Modelo de Gobierno SOA. v0.5: <strong>Capacidades del Gobierno</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Contexto, Áreas, Procesos, Objetivos</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td><strong>1.4b97708</strong> del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="capacidades-fna-por-desarrollar-para-el-gobierno-soa">Capacidades FNA por Desarrollar para el Gobierno SOA</h2>
<p>Las capacidades requeridas por el gobierno SOA del Fondo, que a la vez soportan a la matriz de roles y responsabilidades (RACI) del equipo de gobierno SOA, desarrollada más adelante en este producto, están relacionados directamente con los objetivos del gobierno SOA y con los riesgos tecnológicos encontrados en la Fase 1 de E-Service (ver <a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">06a.Objetivos gobierno</a>, y <a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">06c.Riesgos tecnológicos SOA</a>).</p>
<p><br></p>
<blockquote>
<p><strong>Nota</strong>: si bien algunas capacidades se realizan mediante la oficina de arquitectura, no es del alcance de esta consultoría, E-Service, Fase II (contrato 181-2020), desarrollarlas todas. Es del alcance enunciarlas como requeridas y considerarlas en esta versión de gobierno SOA, v0.5, objeto de este proyecto. Desarrollar la completitud de estas capacidades de negocio requeriría, similar a cualquier otra capacidad del FNA, la ejecución de otro(s) proyecto de índole de capital humano.</p>
</blockquote>
<div id="fig:923d3225-2ce7-4931-aece-adc57bf6a83f" class="fignos">
<figure>
<img src="images/capacidades.png" alt="Imagen 8: TOGAF 9, Fase G, Implementation governance para la implementación de las capacidades de ejecución de hojas de ruta del FNA." />
<figcaption aria-hidden="true"><span>Imagen 8:</span> TOGAF 9, Fase G, Implementation governance para la implementación de las capacidades de ejecución de hojas de ruta del FNA.</figcaption>
</figure>
</div>
<p><em>Fuente: Diagnóstico SOA. E-Service (2022).</em></p>
<p><br></p>
<ol type="1">
<li><p>CAP01. Realizar e implementar estrategias y entregables para planear y analizar la arquitectura de referencia SOA del Fondo (resultado Fase 2 de este diagnóstico). Esta capacidad se realiza mediante el flujo <em>Colaboración Modelado con Proveedores</em> (FLUJ02) de trabajo de la oficina de arquitectura del FNA.</p></li>
<li><p>CAP02. Relacionar elementos de la arquitectura de referencia SOA (181-2020), esto es, procesos de negocio, servicios, datos, aplicaciones, componentes, tecnologías, etc., y vincular distintas perspectivas a una vertical de negocio del Fondo, como, Gestión Comercial, Cesantías, Ahorro Voluntario para desarrollar modelos consistentes y desarrollar la oportunidad de dirigir cambios y atacar los problemas de integralidad de las pruebas. Esta capacidad se realiza mediante el flujo <em>Colaboración Modelado con Proveedores</em> (FLUJ02) de trabajo de la oficina de arquitectura del FNA.</p></li>
<li><p>CAP03. Realizar y gestionar la puesta en marcha de hojas de ruta para cerrar brechas y alcanzar estados futuros de la arquitectura (TOGAF 9, Fase G, Implementation governance). Esta capacidad se realiza con la puesta en marcha de la oficina de arquitectura del FNA.</p></li>
<li><p>CAP04. Ejercitar la trazabilidad de los activos y productos de TI con los productos y decisiones de negocio de las áreas del FNA, como la vicepresidencia de Crédito y la de Operaciones ante la llegada de impactos, cambios, reformas y bajas tecnológicas. Esta capacidad se realiza con la puesta en marcha de la oficina de arquitectura del FNA.</p></li>
<li><p>CAP05. Realizar análisis de impacto, riesgos, costo beneficio, capacidad usada, y gestión de demanda ante la evaluación de cambios a la arquitectura de referencia SOA y activos de TI, cuando lo amerite. Esta capacidad se realiza, en parte, mediante el flujo <em>Colaboración Modelado con Proveedores</em> (FLUJ02) de trabajo de la oficina de arquitectura del FNA, y con la colaboración de los arquitectos de fábricas y proveedores.</p></li>
<li><p>CAP06. Emitir y gestionar los contenidos de documentación técnica, como principios, restricciones tecnológicas, marcos de trabajo, normas, diseños, y estándares para el uso de los proveedores, servicios de fábricas del FNA, planta interna, Comunicación y Planeación. Esta capacidad se realiza, en parte, con la puesta en marcha de la oficina de arquitectura del FNA.</p></li>
<li><p>CAP07. Emitir y actualizar el marco de trabajo de gobierno SOA que complemente el de TI del Fondo y que enuncie los procesos, procedimientos y responsabilidades de este con el fin de generar la autoridad y asistir en la toma de decisiones internas (áreas de TI y Planeación del Fondo) y externas (proveedores del Fondo). Esta capacidad se realiza, en parte, con la puesta en marcha de la oficina de arquitectura del FNA.</p></li>
</ol>
<p><br></p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Modelo de Gobierno SOA. v0.5: <strong>La Oficina de Arquitectura del FNA</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Contexto, Áreas, Procesos, Objetivos, Principios</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td><strong>1.4b97708</strong> del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h1 id="la-oficina-de-arquitectura-del-fna">La Oficina de Arquitectura del FNA</h1>
<p>Es la manifestación material del gobierno SOA del FNA. La oficina de arquitectura del FNA (LOAF) es el órgano ejecutivo del gobierno SOA, y por tanto, debe contar con recursos materiales (presupuesto), físicos, procedimentales y teóricos, tanto para su puesta en marcha, como para desplegar el gobierno en la empresa y hacerlo presencial a los proveedores de la empresa también. La oficina de arquitectura es la presencia del gobierno a lo largo (áreas) y ancho (proveedores)de la empresa.</p>
<p>La oficina (en adelante, LOAF) es aquella que recibe, y puede objetar, los requerimientos de arquitectura que en su momento convierte en una Declaración de Trabajo de Arquitectura (DTA) mediante métodos estándares seleccionados en cumplimiento con el modelo de gobierno (ver <a href="onenote:#N003a.com">Modelo de Gobierno SOA del FNA: Actores, Información y Procedimientos</a>). La objeción de un requerimiento puede ser sobrescrita o avalada por el Comité de Arquitectura (ver <a href="onenote:#N003a.com">Comité de Arquitectura del FNA</a> más adelante). Inmediatamente aceptado el requerimiento, los arquitectos de cada dominio involucrados con la oficina inician los análisis requeridos por el gobierno (ver <a href="https://stefaninilatam.sharepoint.com/SitePages/Home.aspx">Análisis Mínimos Exigidos por Gobierno SOA FNA</a>). El gobierno del FNA exige además la actualización de los modelos, que, en caso de no existir, estos deben ser levantados previo a los análisis.</p>
<h1 id="principios-rectores-de-la-oficina-de-arquitectura-del-fna">Principios Rectores de la Oficina de Arquitectura del FNA</h1>
<p>Los principios rectores que sostienen al gobierno SOA del FNA son:</p>
<ul>
<li><p>PRNC01. Conocimiento y Compromiso. Todas los involucrados deben contar con el conocimiento y experiencia (perfil de estudios) requeridos para el rol de arquitecto FNA, en particular, habilidades de diseño. Junto a esto, el compromiso de conocer el gobierno y adherirse a los procedimientos, procesos y estructuras de autoridad estipulados.</p></li>
<li><p>PRNC02. Registro y Rendición de Cuentas. Las acciones por implementar que siguen a las decisiones y sus soportes deben constar en la bitácora de decisiones de arquitectura y disponibles para inspección por una la empresa y partes proveedoras pertinentes.</p></li>
<li><p>PRNC03. Paridad y Ponderación. Las decisiones de arquitectura no pueden generar ventajas injustas ni favorecer a un parte sobre otra.</p></li>
<li><p>PRNC04. Cumplimiento de Directiva de Arquitectura. Por sobre todas las cosas, la oficina de arquitectura debe cumplir con la realización de las siguientes políticas.</p></li>
</ul>
<h2 id="políticas-de-la-oficina-de-arquitectura-del-fna">Políticas de la Oficina de Arquitectura del FNA</h2>
<ol type="1">
<li><p>Estandarización. Desarrollo, promoción aplicación de estándares de diseño de servicios, componentes, y soluciones en toda la empresa.</p></li>
<li><p>Coherencia. Validación y aplicación de los estándares y herramientas, en igual medida, en los diseños de servicios, componentes y soluciones de la empresa que esta elabore o intervenga.</p></li>
<li><p>Reutilización. Aplicar el uso de capacidades y estrategias habilitadoras de la reutilización de diseño de servicios, componentes, y soluciones que aprovechan los activos del FNA.</p></li>
<li><p>Retorno de Beneficio. Procurar el aprovechamiento (cualitativo) y demostrar el beneficio material (cuantitativo) a través de procesos de gobierno y el uso de métodos repetibles que permiten niveles reducidos de costos, tales que determinen el retorno de las inversiones de TI y negocio.</p></li>
</ol>
<p><br></p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Modelo de Gobierno SOA. v0.5: <strong>Flujos de Trabajo Oficina de Arquitectura</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Contexto, Áreas, Procesos, Objetivos, Flujo de trabajo</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td><strong>1.4b97708</strong> del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h1 id="flujos-de-trabajo-oficina-de-arquitectura">Flujos de Trabajo Oficina de Arquitectura</h1>
<p>El flujo de trabajo de la oficina de arquitectura es un mecanismo de prevención de las carencias de gobierno 0.2 del FNA (ver <a href="../../fna-dd-f2-pry1/content/01a3.flujos.md">Análisis de susceptibilidad de gobierno (PR01)</a>, y <a href="https://stefaninilatam.sharepoint.com/SitePages/Home.aspx">Anexo 1. Susceptibilidades de Gobierno (PR01)</a>), al refinar el proceso de colaboración y autoría de modelos, lo mismo, que al tomar como base del trabajo al repositorio de arquitectura del FNA. El flujo de trabajo de arquitectura resalta los roles y responsabilidades de los participantes: arquitectos FNA, arquitectos solución (proveedores), administradores del repositorio de arquitectura, revisores y aprobadores, y audiencia objetivo de los resultados del trabajo.</p>
<p>Para cubrir los casos más significativos del análisis de susceptibilidad de gobierno, hemos creado los flujos de trabajo interno, y su alternativa, el de proveedores, definidos para priorizar la atención a tales problemas. Los problemas de gobierno referidos son</p>
<h2 id="susceptibilidades-de-gobierno-pr01">Susceptibilidades de Gobierno (PR01)</h2>
<ol type="1">
<li>Debilidad en la Completitud de los CU</li>
<li>Herramientas y Métodos de QA relacionados con sistemas distribuidos y QA​</li>
<li>Normalización y fortalecimiento de los ambientes QA ​</li>
<li>Gestión del diseño y arquitecturas: categorización de complejidad​</li>
<li>Correspondencia complejidad - diseño</li>
<li>Débil (o inexistente) procedimiento de evaluación de inversión​</li>
<li>Débil (o inexistente) formalidad para el cálculo de eficacia un inversión​ TI, proveedores</li>
<li>Normalizar registro de resultados de las entregas de proveedores​ (confiabilidad)</li>
<li>Asignación de responsables de gestión de las inversiones de TI</li>
</ol>
<p><br></p>
<p>Adicional a estas, existen otras problemáticas inherentes ya no al Gobierno, si no a la colaboración y autoría de modelos de arquitectura. Estas problemáticas, que las llamaremos de colaboración, también son abordadas por los flujos de trabajo diseñados para la oficina de arquitectura del FNA.</p>
<h2 id="problematicas">Problemáticas de Colaboración y Edición de Modelos</h2>
<p>Existen tres problemáticas exclusivas de la creación de modelos, a las cuales buscamos darle manejo desde este ejercicio de gobierno y puesta en marcha de la Oficina de Arquitectura del FNA. Estos problemas de modelamiento, y que son más cuestionables a los profesionales de arquitectura de todos los dominios (software, datos, etc.), se presentan en la forma cómo colaboran al momento de documentar, aumentar detalle, o gestionar las versiones de los modelos.</p>
<p>Son señales de problemas de colaboración en el modelamiento de arquitectura</p>
<ul>
<li><strong>Fragmentación</strong>. Equipos de arquitectura separados en distintas empresas, grupos o divisiones físicas o administrativas y con poca o nada comunicación mediada por lenguajes informales, no por diseños.</li>
<li><strong>Aislamiento</strong>. Áreas de arquitectura trabajando de manera solitaria crean y usan diferentes estilos, estándares, relacionamiento y niveles de detalle en el modelamiento.</li>
<li><strong>Desapropiación</strong>. La falta de autoría de los modelos: aquel que reclama la propiedad de la información de arquitectura de los modelos, de los niveles de detalles y de las decisiones de soporte, afecta a los equipos de arquitectura, así como a externos, que no saben a quién dirigirse para entender estos activos.</li>
</ul>
<p><br></p>
<h2 id="flujo-de-trabajo-oficina-de-arquitectura-interno-fluj01">Flujo de Trabajo Oficina de Arquitectura Interno (FLUJ01)</h2>
<p>Desarrollamos dos flujos fundamentales de la oficina de arquitectura. El primero, el FLUJ01. Diseño y Análisis de Modelos de Arquitectura del FNA, se ejecuta cada vez que exista una petición de requerimiento de cambio de arquitectura. Los demás pasos de este flujo se resumen a continuación.</p>
<ol type="1">
<li>Recibe el requerimiento de arquitectura
<ul>
<li>Inicia el proceso ADM - Fase de preliminar: alistamiento y aprobación​</li>
<li>Arranca el modelado​ inicial o incremental, nivel 100 <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></li>
</ul></li>
<li>El arquitecto de solución continúa el proceso ADM - solicita implementación / gobierno</li>
</ol>
<p><br></p>
<p>La siguiente imagen ilustra los pasos descritos.</p>
<div id="fig:flujoADM-1.png" class="fignos">
<figure>
<img src="images/flujoADM-1.png" alt="Imagen 9: alt 1. Actividades del flujo de trabajo de la oficina de arquitectura con arreglo al proceso ADM de TOGAF. Este flujo atiende requerimientos internos de la oficina de arquitectura del FNA." />
<figcaption aria-hidden="true"><span>Imagen 9:</span> alt 1. Actividades del flujo de trabajo de la oficina de arquitectura con arreglo al proceso ADM de TOGAF. Este flujo atiende requerimientos internos de la oficina de arquitectura del FNA.</figcaption>
</figure>
</div>
<p><em>Fuente: Elaboración propia.</em></p>
<p><br></p>
<p>El flujo interno tiene un propósito acotado a los asuntos concernientes a los involucrados de la oficina de arquitectura, adscrita a la vicepresidencia de tecnología del FNA. No debe, por tanto, dar alcance a los trabajos que se estén realizando con otras oficinas del Fondo, como por ejemplo Planeación, o con arquitectos externos, proveedores o fábricas de software. De esto último es precisamente de lo que se encarga el flujo no. 2, Flujo de Trabajo Oficina de Arquitectura Proveedores, descrito más adelante. El flujo interno de la oficina puede, sin embargo, y con mucha frecuencia lo hará, dar inicio a un flujo 2, que de colaboración entre oficinas y proveedores y fábricas se trata.</p>
<p><br></p>
<h2 id="flujo-de-trabajo-oficina-de-arquitectura-proveedores-fluj02">Flujo de Trabajo Oficina de Arquitectura Proveedores (FLUJ02)</h2>
<p>Una variante del flujo de trabajo arquitectura ADM, y más significativa para el FNA, incorpora los tipos de análisis que se deben llevar a cabo, como exigencia del gobierno que estamos instalando.</p>
<ol type="1">
<li><p>El Arq. FNA recibe el requerimiento de cambio</p></li>
<li><p>Inicia el proceso ADM - fase de preliminar: alistamiento y probación</p></li>
<li><p>Inicia el modelado</p>
<ol type="1">
<li>Diseño
<ol type="1">
<li>Inicia diseño conceptual (nivel 100): appl, datos, TI, servicios, inversión</li>
<li>Bloques de construcción abstractos</li>
</ol></li>
<li>Solución
<ol type="1">
<li>Bloques de construcción de solución</li>
<li>Solicita diseño detallado (nivel 200, 300, 400 o 500) de los dominios de arquitectura: aplicaciones, datos, infraestructura y servicios</li>
</ol></li>
</ol></li>
<li><p>El Arquitecto FNA inicia los análisis mínimos</p>
<ol type="1">
<li>Análisis de impacto</li>
<li>de Complejidad</li>
<li>y Costo / beneficio</li>
</ol></li>
<li><p>El Arquitecto FNA (de la oficina de arquitectura) solicita al arquitecto de solución, sea de proveedor interno o externo, el inicio del Proceso ADM - fase de implementación y fase de gobierno</p>
<ol type="1">
<li>El arquitecto de solución modela los bloques de solución <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></li>
</ol></li>
<li><p>El Arquitecto FNA inicia la creación de contenidos y <em>documentación técnica</em></p>
<pre><code>Nota. Otros análisis exigibles también a los arquitectos de solución: Plan de cambios, Estimación, Estructural.</code></pre></li>
</ol>
<h3 id="catálogo-de-elementos-del-flujo-de-trabajo">Catálogo de Elementos del Flujo de Trabajo</h3>
<table>
<colgroup>
<col style="width: 60%" />
<col style="width: 34%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Nombre</th>
<th style="text-align: left;">Tipo</th>
<th style="text-align: left;">Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>ADM Gobierno Cambio 001</strong></td>
<td style="text-align: left;">application-collaboration</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>ADM Implementación Cambio 001</strong></td>
<td style="text-align: left;">application-collaboration</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>ADM Preliminar Cambio 001</strong></td>
<td style="text-align: left;">application-collaboration</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>GOB03. Modelamiento</strong></td>
<td style="text-align: left;">application-collaboration</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>GOB04. Repositorio Artefactos FNA &lt;<Mega>&gt;</strong></td>
<td style="text-align: left;">application-interaction</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Aplicaciones</strong></td>
<td style="text-align: left;">application-process</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Datos</strong></td>
<td style="text-align: left;">application-process</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Infraestructura</strong></td>
<td style="text-align: left;">application-process</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Inversión TI</strong></td>
<td style="text-align: left;">application-process</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Servicios</strong></td>
<td style="text-align: left;">application-process</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Actores Áreas FNA</strong></td>
<td style="text-align: left;">business-actor</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Arquitecto FNA</strong></td>
<td style="text-align: left;">business-actor</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Arquitecto Solución</strong></td>
<td style="text-align: left;">business-actor</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>GOB01. Colaboración entre Oficinas</strong></td>
<td style="text-align: left;">business-collaboration</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Análisis</strong></td>
<td style="text-align: left;">data-object</td>
<td style="text-align: left;">Análisis de impacto, complejidad, plan de cambios, estimaciones, costo / beneficio.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Bloques de Solución (N200…500)</strong></td>
<td style="text-align: left;">data-object</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Contenidos</strong></td>
<td style="text-align: left;">data-object</td>
<td style="text-align: left;">Presentaciones, Diagramas, Textos, Matrices, Listas, Catálogos, Estimaciones.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Diseños (N100)</strong></td>
<td style="text-align: left;">data-object</td>
<td style="text-align: left;">Diseños de nivel 100. Conceptuales. Necesarios para insumo de análisis de impacto, complejidad y costo / beneficio.</td>
</tr>
</tbody>
</table>
<div style="page-break-before: always;">

</div>
<p><br></p>
<h2 id="bloques-de-construcción-requeridos-por-arquitectura-laof">Bloques de Construcción Requeridos por Arquitectura (LAOF)</h2>
<p>Los bloques de solución a los que nos referimos en los pasos no. 2 y 5 del flujo anterior, arquitecto de solución, son los paquetes de funcionalidad definidos por las necesidades de negocio o del arquitecto. Pueden ser cualquier clasificador (objeto tipo) correspondiente al modelo de contenidos de la empresa, como por ejemplo, actores, servicios, aplicaciones, o entidades de datos. Representan un único concepto que tiene límites claros y es reconocible como ‘parte’ en un dominio de la arquitectura. Puede o no interoperar con otros bloques. Es importante que un bloque de construcción tenga una implementación y un uso. Debe además evolucionar mediante la tecnología.</p>
<p>Los bloques de solución pueden estar compuesto por otros (ensamblado), y por tanto, puede ser descompuesto (desensamblado) en los bloques pequeños que los constituyen. Es obligatorio que sea reutilizable, reemplazable, y especificado a conformidad.</p>
<p>Los sistemas y herramientas de software de la arquitectura del FNA deben estar creados a partir de colecciones de bloques de solución. De ahí que estos bloques deban tener una interfaz de interacción clara y estable para con otros bloques.</p>
<p>Lo más importante de estos bloques es que son los que contienen los niveles de detalle (100 al 500). Por ejemplo, a nivel 100, el arquitecto del FNA podría dar comienzo al modelado de un bloque de solución mediante un nombre, una descripción o un esquema. Luego, el arquitecto de solución, puede descomponer este mismo bloque en múltiples construcciones acompañada de una especificación más detallada (nivel 200 al 500).</p>
<p>En la siguiente imagen ilustramos esta variante del flujo de trabajo de la oficina de arquitectura del FNA.</p>
<div id="fig:flujoADM-2.png" class="fignos">
<figure>
<img src="images/flujoADM-2.png" alt="Imagen 10: alt 2. Actividades y relaciones de los estados de un flujo de trabajo de la oficina de arquitectura con arreglo al proceso ADM de TOGAF. Flujo para la oficina de arquitectura en conjunto con proveedores del FNA." />
<figcaption aria-hidden="true"><span>Imagen 10:</span> alt 2. Actividades y relaciones de los estados de un flujo de trabajo de la oficina de arquitectura con arreglo al proceso ADM de TOGAF. Flujo para la oficina de arquitectura en conjunto con proveedores del FNA.</figcaption>
</figure>
</div>
<p><em>Fuente: Elaboración propia.</em></p>
<p><br></p>
<p>El flujo 2, que atiende la colaboración entre oficinas de arquitecturas, bien puede ser iniciado por un flujo interno de la oficina del FNA, (FLUJ01, Flujo de Trabajo Oficina de Arquitectura Interno). Es frecuente que una implementación iniciada por el este flujo (2 le corresponda una revisión interna, y de esta, se inicien varios flujos de implementación y colaboración de cambios a los servicios y aplicaciones del FNA.</p>
<p><br></p>
<h1 id="puntos-de-control-del-flujo-de-trabajo-de-la-oficina-fna">Puntos de Control del Flujo de Trabajo de la Oficina FNA</h1>
<p>Los flujos antes descritos, interno y el de colaboración, deben contar con puntos de control diseñados específicamente para atender a las problemáticas mencionadas en <a href="#problematicas">Problemáticas de arquitectura</a>.</p>
<pre><code>Nota: existen tres problemáticas exclusivas de la creación de modelos: Fragmentación, Aislamiento y Desapropiamiento. Estos problemas de modelamiento se presentan en la forma cómo colaboran los arquitectos al momento de documentar, detallar, y versionar los modelos.</code></pre>
<p><br></p>
<h2 id="punto-de-control-1.-criterios-de-modelamiento-divergentes">Punto de Control 1. Criterios de Modelamiento Divergentes</h2>
<p>El repositorio de arquitectura es el depósito visible de todos los activos modelados del FNA. La autoría de los modelos requiere el cumplimiento de reglas de modelamiento, como nomenclaturas y códigos que sinteticen la información y faciliten posteriormente su comunicación. Son reglas edición que pueden ser evidenciadas y ejercitadas mediante las herramientas de validación de modelos, facilidad a cargo de la herramienta con la que se implemente el repositorio de arquitectura del FNA.</p>
<p>Las reglas de edición deben ser extendidas o removidas en la medida necesaria. La Oficina de arquitectura del FNA es la responsable de esta actividad.</p>
<h2 id="punto-de-control-2.-verificación-diseño---implementación">Punto de Control 2. Verificación Diseño - Implementación</h2>
<p>La actividad ADM Gobierno Cambio 001 (actividad no. 5.0 y 5.1 en el diagrama <a href="#flujo-de-trabajo-oficina-de-arquitectura-proveedores-fluj02">Flujo de Trabajo Oficina de Arquitectura Proveedores (FLUJ02)</a>) del flujo de colaboración/implementación es la llamada a realizar este control.</p>
<p>Además de las actividades que se llevan a cabo en el interno de la actividad referida, en esta se deben realizar las labores de verificación de la implementación. Esto se da cuando el arquitecto FNA involucrado en la corrida de este flujo constata la presencia del diseño durante la construcción correspondiente, o en su implementación resultante. Para el efecto, el arquitecto debe seguir los mecanismos, y usar los dispositivos de control que la Oficina de Arquitectura del Fondo haya dispuesto para este propósito.</p>
<h2 id="punto-de-control-3.-seguimiento-de-cambios-a-modelos">Punto de Control 3. Seguimiento de Cambios a Modelos</h2>
<p>El seguimiento de los cambios consiste en la verificación de que los diseños permanezcan vigentes ante las novedades y nuevas decisiones sucedidas en la construcción.</p>
<div id="fig:pcontrol.png" class="fignos">
<figure>
<img src="images/pcontrol.png" alt="Imagen 11: Puntos de control del flujo de colaboración entre oficinas de arquitectura para el FNA. Los puntos de control van dirigidos principalmente a tratar el problema de los incumplimientos de diseño en las implementaciones." />
<figcaption aria-hidden="true"><span>Imagen 11:</span> Puntos de control del flujo de colaboración entre oficinas de arquitectura para el FNA. Los puntos de control van dirigidos principalmente a tratar el problema de los incumplimientos de diseño en las implementaciones.</figcaption>
</figure>
</div>
<p><em>Fuente: Diagnóstico SOA. E-Service (2022).</em></p>
<p><br></p>
<p><br></p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Modelo de Gobierno SOA. v0.5: <strong>Funciones del Gobierno y Matriz de Responsabilidades</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Contexto, Áreas, Procesos, Objetivos</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td><strong>1.4b97708</strong> del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h1 id="funciones-del-gobierno-soa-del-fna">Funciones del Gobierno SOA del FNA</h1>
<p>Las funciones que vamos a definir para el gobierno SOA del FNA, entendidas como responsabilidades generales que competen también a la oficina de arquitectura, están dirigidos a las problemáticas encontradas en la Fase I. Estos son, a saber:</p>
<ul>
<li>Dado los niveles de complejidad que el FNA ha alcanzado y por los riesgos tecnológico que contraen las partes analizadas en la Fase 1 de este diagnóstico (…)</li>
<li>De las problemáticas encontradas en la Fase 1 del presente diagnóstico, (…)) explícitamente a las que incrementan la complejidad de las soluciones tecnológicas y de software del FNA, <em>como lo es el manejo de dependencias de los servicios SOA del Fondo</em>. Es muy conocido que esta condición es la causa de la mayoría de los sobreesfuerzos en los cambios y de las dificultades a la hora de predecir su impacto.</li>
<li>(…) Estas complicaciones, que denotan un débil gobierno preexistente, se encuentran otras que fueron levantadas en la Fase 1 del diagnóstico E-Service: - Agilidad limitada, - Complejidad e imprecisión, en la trazabilidad, - Ocultamiento de funcionalidades.</li>
</ul>
<p>Ver <a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">Resumen de Fase 1</a>.</p>
<p><br></p>
<h2 id="funciones-de-gobierno-fna-oficina-de-arquitectura">Funciones de Gobierno FNA: Oficina de Arquitectura</h2>
<p>Las condiciones preexistentes en el FNA indicadas arriba definen el contexto en el cual debe operar, y el que hay que enfrentar con el nuevo gobierno SOA del FNA, versión 0.5. Para enfrentar este contexto requerimos antes lo que llamaremos funciones del gobierno, y que estas sean explícitas para el contexto del FNA. Estas funciones deben tener un corresponsal directo, y este es la oficina de arquitectura del FNA (LOAF), dado que esta es la que las debe ejecutar. Por tanto, el modelo de gobierno FNA, v0.5, propuesto arriba, <em>viene a jugar el rol del sistema operativo del que la oficina de arquitectura es el órgano ejecutivo de este gobierno</em>.</p>
<p>Para darle realización a todo el modelo de gobierno (el sistema operativo de la oficina) necesitamos en primer lugar que la oficina funcione de una manera particular. Esto es, la oficina debe ejecutar funciones claras y entregar el resultado de estas a quienes se las solicitan. Vamos a definir tres funciones fundamentales que, desde el gobierno, la oficina de arquitectura del FNA (LOAF) debe realizar con modalidad diaria.</p>
<p>Estas funciones son operaciones esperadas por aquellos con los que la oficina de arquitectura se relacione. Vienen siendo la interfaz de la oficina expuesta a terceros, y que estos pueden utilizar o requerir de los arquitectos.</p>
<div id="fig:fa70a96e-7cbe-4c21-bfa1-32f9d8cb1bbd" class="fignos">
<figure>
<img src="images/funcionesof.png" alt="Imagen 12: Funciones operativas de la Oficina de Arquitectura del FNA. Operaciones solicitadas a la oficina." />
<figcaption aria-hidden="true"><span>Imagen 12:</span> Funciones operativas de la Oficina de Arquitectura del FNA. Operaciones solicitadas a la oficina.</figcaption>
</figure>
</div>
<p><em>Fuente: Elaboración propia.</em></p>
<p><br></p>
<p>En la imagen muestra que estas funciones operativas juegan el rol de interfaz de entrada para quien demande una respuesta (salida) de la oficina. Las funciones se complementan de solicitudes específicas que actúan a su vez como contratos de la interfaz de la oficina. Estas funciones se explican se la siguiente manera.</p>
<h3 id="fun01.-centralizar">FUN01. Centralizar</h3>
<p>La función de centralizar se ocupa de reunir y gestionar la versión única de los productos de trabajo, y de la información, que posee la oficina. Ejemplo, las decisiones de arquitectura. Es deber del área de arquitectura del FNA centralizar la autoría y gestión de este tipo de información. De igual manera se entiende esta función con otro ejemplo o tipo de información a centralizar: los modelos.</p>
<h3 id="fun02.-diagnosticar-solución-modelar">FUN02. Diagnosticar / Solución (modelar)</h3>
<p>La función de diagnosticar y modelar una solución es la función central de esta oficina de arquitectura en el FNA. Esto se debe a que todos los resultados que la oficina produce están basados en modelos, y en hechos objetivos, alejándose de la habitual intuición y el juicio apresurado.</p>
<h3 id="fun03.-distribuir-compartir">FUN03. Distribuir (compartir)</h3>
<p>La función de distribuir, que equivale a la función de compartir contenidos, es la gestión de las entregas de los productos de trabajo, resultados y contenidos producidos por las funciones anteriores.</p>
<p><br></p>
<h1 id="responsabilidades-de-la-oficina-de-arquitectura">Responsabilidades de la Oficina de Arquitectura</h1>
<h2 id="responsabilidades-generales">Responsabilidades Generales</h2>
<p>Las responsabilidades que el gobierno del FNA debe exigir, y que la oficina de arquitectura del FNA debe realizar, son:</p>
<ul>
<li>RESPC01. Vigilancia de alineación negocio-arquitectura</li>
<li>RESPC02. Equilibrio arquitectura y procesos SOA</li>
<li>RESPC03. Supervisión de efectividad y factibilidad SOA</li>
<li>RESPC04. Mejora de los índices de efectividad (madurez) SOA</li>
<li>RESPC05. Consideraciones para la puesta en marcha del gobierno SOA en el FNA</li>
</ul>
<p><br></p>
<p>En una vista de conjunto, presentamos el hecho de que las funciones de gobierno, en tanto que acciones, tenderán a convertirse en las responsabilidades que los integrantes del área de arquitectura del FNA deben cumplir. En la imagen siguiente dejamos explícitos estas responsabilidades.</p>
<div id="fig:4a55c76e-1b40-44c3-92e3-ecd1c20b4dd1" class="fignos">
<figure>
<img src="images/responsabilidadgob.png" alt="Imagen 13: Funciones (responsabilidades) de la Oficina de Arquitectura del FNA. Gobierno SOA, v0.5." />
<figcaption aria-hidden="true"><span>Imagen 13:</span> Funciones (responsabilidades) de la Oficina de Arquitectura del FNA. Gobierno SOA, v0.5.</figcaption>
</figure>
</div>
<p><em>Fuente: Elaboración propia.</em></p>
<p><br></p>
<h1 id="roles-y-responsabilidades-de-la-oficina-de-arquitectura">Roles y Responsabilidades de la Oficina de Arquitectura</h1>
<h2 id="responsabilidades-por-rol">Responsabilidades por Rol</h2>
<p>Partimos del modelo de gobierno, versión 0.5.</p>
<div id="tbl:rolresp-id" class="tablenos">
<table id="tbl:rolresp-id">
<caption><span>Tabla 7:</span> Roles y Responsabilidades de la Oficina de Arquitectura FNA exigidos por el Gobierno SOA. </caption>
<colgroup>
<col style="width: 52%" />
<col style="width: 29%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Nombre</th>
<th style="text-align: left;">Tipo</th>
<th style="text-align: left;">Responsabilidades</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Actores Áreas FNA</strong></td>
<td style="text-align: left;">business-actor</td>
<td style="text-align: left;">Solicitar y revisar contenidos emitidos por la oficina de arquitectura FNA</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Arquitecto SOA FNA</strong></td>
<td style="text-align: left;">business-actor</td>
<td style="text-align: left;">- Ejecutar el flujo de trabajo de la oficina de arquitectura</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">- Evaluar el apego al flujo de trabajo por parte de los arquitectos involucrados con la oficina</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">- Realizar las actividades de análisis exigidas por el gobierno SOA (ver tabla <span class="citation" data-cites="tabl:accexigidos-id">[<a href="#ref-tabl:accexigidos-id" role="doc-biblioref"><strong>tabl:accexigidos-id?</strong></a>]</span>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Arquitecto FNA</strong></td>
<td style="text-align: left;">business-actor</td>
<td style="text-align: left;">- Ejecutar el flujo de trabajo de la oficina de arquitectura</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">- Elaborar los productos de trabajo exigidos por el gobierno SOA del FNA (ver tabla <a href="#tbl:ptexigidos-id">8</a>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">- Realizar las actividades de análisis exigidas por el gobierno SOA (ver tabla <span class="citation" data-cites="tabl:accexigidos-id">[<a href="#ref-tabl:accexigidos-id" role="doc-biblioref"><strong>tabl:accexigidos-id?</strong></a>]</span>)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Arquitecto Solución</strong></td>
<td style="text-align: left;">business-actor</td>
<td style="text-align: left;">- Implementar los diseños provistos por la oficina de arquitectura del FNA</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>GOB01. Colaboración entre Oficinas</strong></td>
<td style="text-align: left;">business-collaboration</td>
<td style="text-align: left;">Elaborar los registros de colaboración entre oficinas exigidos por el gobierno</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="tbl:ptexigidos-id" class="tablenos">
<table id="tbl:ptexigidos-id">
<caption><span>Tabla 8:</span> Productos de trabajo exigidos por el Gobierno SOA. </caption>
<thead>
<tr class="header">
<th>Productos de trabajo exigidos</th>
<th>Tipo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Caso Uso de Negocio</strong></td>
<td>business-object</td>
</tr>
<tr class="even">
<td><strong>Inversión TI</strong></td>
<td>business-object</td>
</tr>
<tr class="odd">
<td><strong>Requerimiento de Arquitectura</strong></td>
<td>business-object</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl:accexigidos-id" class="tablenos">
<table id="tbl:accexigidos-id">
<caption><span>Tabla 9:</span> Tareas de análisis exigidas a los arquitectos de la oficina (Gobierno SOA). </caption>
<thead>
<tr class="header">
<th>Actividades de análisis exigidas</th>
<th>Tipo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ALS01. Complejidad</strong></td>
<td>assessment</td>
</tr>
<tr class="even">
<td><strong>ALS02. Impacto</strong></td>
<td>assessment</td>
</tr>
<tr class="odd">
<td><strong>ALS03. Costo / Beneficio</strong></td>
<td>assessment</td>
</tr>
<tr class="even">
<td><strong>ALS04. Específicos</strong>*</td>
<td>assessment</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Modelo de Gobierno SOA. v0.5: <strong>Procedimientos base del modelo de gobierno / oficina de arquitectura</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Contexto, Áreas, Procesos, Objetivos</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td>1.4b97708 del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h1 id="procedimientos-del-modelo-de-gobierno-del-fna">Procedimientos del Modelo de Gobierno del FNA</h1>
<p>Por último, el proceso de gobierno SOA es la conjugación de las dos consideraciones anteriores aquí presentadas, el marco de trabajo (acciones y herramientas) y el equipo de trabajo, que traídos al contexto del FNA son los recursos de capital humano y la manera cómo deben operar. Este proceso adaptado al FNA busca alcanzar los objetivos SOA determinados por este diagnóstico. (ver imagen abajo)</p>
<div id="fig:proceso-gob.png" class="fignos">
<figure>
<img src="images/proceso-gob.png" alt="Imagen 14: Actividades y relaciones del proceso principal de gobierno SOA para el FNA. Relación con capacidades y objetivos SOA necesarios para el FNA." />
<figcaption aria-hidden="true"><span>Imagen 14:</span> Actividades y relaciones del proceso principal de gobierno SOA para el FNA. Relación con capacidades y objetivos SOA necesarios para el FNA.</figcaption>
</figure>
</div>
<p><em>Fuente: elaboración propia.</em></p>
<p><br></p>
<p>El proceso de gobierno SOA está en línea y apoya a las capacidades SOA que el FNA debe implementar. Al alinear las capacidades SOA con este proceso aseguramos que se persigan los objetivos SOA establecidos por esta consultoría.</p>
<p>Por otro lado, esta implementación de Gobierno SOA debe ser un proceso más del Fondo, no es un proyecto. En este sentido, los pasos de este proceso son un bucle activo de mejora continua, y debe hacer parte del mapa de calidad del Fondo (como uno más de los procesos operativos existentes).</p>
<p>Una vista de conjunto pone en perspectiva el rol de los procesos de la oficina de arquitectura frente a las capacidades que estos soportan, y los objetivos a los que propende y que se sostienen en las capacidades.</p>
<p><em>Fuente: elaboración propia.</em></p>
<p><br></p>
<h2 id="gestión-del-cambio-e-impacto-en-las-arquitecturas-incepción">Gestión del Cambio e Impacto en las Arquitecturas (incepción)</h2>
<p>La gestión de cambio la definimos como la gestión del alcance del reajuste en la arquitectura, distinto a un cambio en una aplicación, sistema de información, datos o plataforma del FNA. El cambio por gestionar debe ser analizado desde la perspectiva de la arquitectura actual, o en su defecto desde la de la arquitectura candidata. En este sentido, el cambio es descrito en términos del qué, dónde, quién y cómo cambiar la arquitectura SOA del Fondo.</p>
<p>Una entrada razonable de este paso es la discusión mediante vistas de la potencialidad del cambio (dificultades y beneficios) y las preocupaciones de los interesados, gerentes y dueños de procesos / productos. Es necesario a veces complementar o contrastar el cambio con otros requerimientos.</p>
<p>El resultado o salida de este paso es el bosquejo de la adaptación, que son las tareas mínimas y más impactantes para la implementación del cambio / iteración en la arquitectura.</p>
<p>Como herramienta para la realización de este paso del proceso presentamos una ficha de descripción del evento de cambio.</p>
<h2 id="evaluación-y-alistamiento-madurez">Evaluación y Alistamiento (madurez)</h2>
<p>El proceso de alistamiento, devenido de TOGAF, y adaptado al contexto del FNA, no es más que listar los requisitos de información y hechos necesarios para aprobar el cambio de la arquitectura del Fondo.</p>
<p><br></p>
<hr />
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Gobierno SOA del FNA: <strong>Anexos del Modelo de Gobierno del FNA</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Contexto, Áreas, Procesos, Objetivos</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td><strong>1.4b97708</strong> del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="anexo-1.-susceptibilidades-de-gobierno-pr01">Anexo 1. Susceptibilidades de Gobierno (PR01)</h2>
<ol type="1">
<li>Debilidad en la Completitud de los CU</li>
<li>Herramientas y Métodos de QA relacionados con sistemas distribuidos y QA​</li>
<li>Normalización y fortalecimiento de los ambientes QA ​</li>
<li>Gestión del diseño y arquitecturas: categorización de complejidad​</li>
<li>Correspondencia complejidad - diseño</li>
<li>Débil (o inexistente) procedimiento de evaluación de inversión​</li>
<li>Débil (o inexistente) formalidad para el cálculo de eficacia un inversión​ TI, proveedores</li>
<li>Normalizar registro de resultados de las entregas de proveedores​ (confiabilidad)</li>
<li>Asignación de responsables de gestión de las inversiones de TI</li>
</ol>
<p><br></p>
<h2 id="anexo-2.-riesgos-técnicos-fna-e-service-2022">Anexo 2. Riesgos Técnicos FNA (E-Service, 2022)</h2>
<ul>
<li>R01. Riesgo de agilidad limitada (ver imagen 1)</li>
<li>R02. Riesgo de baja orquestación SOA (ver imagen 2a y 2b)</li>
<li>R03. Riesgo de crecimiento de dependencias entre servicios SOA</li>
<li>R04. Riesgo de crecimiento de adaptadores particulares –opuesto al estándar– (ver imagen 3)</li>
<li>R05. Riesgo de baja reutilización de servicios SOA</li>
<li>R06. Riesgo de permanencia de aplicaciones silos</li>
<li>R07. Riesgo de falta de trazabilidad para la evolución e implementación de los servicios SOA</li>
</ul>
<h2 id="anexo-3.-proceso-adm-de-togaf">Anexo 3. Proceso ADM de TOGAF</h2>
<p>El proceso de creación de arquitecturas de TOGAF sirve también para la gestión de las mismas, objetivo que se alinea con los de este proyecto. En particular, las Fase (F) Planeación de la Migración, (G) Gobierno de la Implementación y (H) Gestión del Cambio de las Arquitecturas.</p>
<div id="fig:adm.gif" class="fignos">
<figure>
<img src="images/adm.gif" alt="Imagen 15: TOGAF 9, Fase G, Implementation governance para la implementación de las capacidades de ejecución de hojas de ruta del FNA." />
<figcaption aria-hidden="true"><span>Imagen 15:</span> TOGAF 9, Fase G, Implementation governance para la implementación de las capacidades de ejecución de hojas de ruta del FNA.</figcaption>
</figure>
</div>
<p><em>Fuente: www.opengroup.org/soa/source-book/togaf.</em></p>
<p><br></p>
<hr />
<h2 id="anexo-4.-formato-para-la-bitácora-de-arquitectura-ard">Anexo 4. Formato para la Bitácora de Arquitectura (ARD)</h2>
<p>La bitácora de decisiones de arquitectura (BDA) es una herramienta para ejercitar el proceso de toma de decisiones de la oficina. La bitácora estructura y sigue (versión y trazabilidad) las discusiones de la oficina de arquitectura del FNA. Cumple el objetivo de materializar el consenso entre los arquitectos elevándolo a un grado oficial, al tiempo que reúne a la oficina alrededor del mismo contexto, problema, restricciones, conveniencia (pro/con), alternativas y opciones de solución.</p>
<p>Existen muchas plantillas para esta herramienta. Proponemos la siguiente.</p>
<h3 id="especificaciones">Especificaciones</h3>
<ul>
<li>Tipo de contenido: texto</li>
<li>Documento versionado</li>
<li>Referencias a partes y elementos del modelo</li>
<li>Referencias a imágenes y contenidos del repositorio de arquitectura FNA</li>
</ul>
<h3 id="formato">Formato</h3>
<p>Título: Comienza con la fecha en formato AAAA-MM-DD siempre que contenga una descripción concisa de lo que trata el ADR. Considere que nombrar es difícil en sistemas, así que desarrolle un sistema de nombramiento para las decisiones de arquitectura: identificación, nomenclatura, prefijos y sufijos. Cualquiera sea el identificador de la entrada, o formato de fecha elegido, debe comportar que el orden alfabético también sea el orden del identificador.</p>
<p>Participantes: Esta es simplemente una lista de personas que participaron en esta discusión. Esto es útil porque ayuda a aclarar preguntas como “¿pero le preguntaste a un desarrollador de aplicaciones?” o “¿estuvo involucrada la gestión de productos en esta decisión?”. Dos días después puede que lo recuerdes. Dos meses después probablemente no.</p>
<p>Estado: Tenemos cuatro estados diferentes en los que un ADR puede ser:
- Abierto: Se ha registrado como un problema, es posible que aún falte información y aún no se ha iniciado la discusión.
- En Progreso: La discusión continúa actualmente.
- RFC: se ha recopilado toda la información necesaria, se ha tomado una decisión propuesta y ahora todos pueden comentarla (“Solicitud de comentarios”).
- Decidido: este es el estado final: cuando se tomó y registró una decisión y todos tuvieron la oportunidad justa de proporcionar comentarios. Después de eso, el ADR se cierra. Se considera una mala práctica modificar las ADR más adelante. Sin embargo, lo que hago de vez en cuando es agregar a las ADR si hay nueva información disponible.
Situación: Aquí describimos la situación actual usando solo hechos. ¿Que estamos haciendo? ¿Cuál es el contexto de esta decisión? ¿Cuáles son las premisas y supuestos para que se sostenga esta decisión? Si es necesario, mencione también lo que explícitamente no está dentro del alcance. Tenga mucho cuidado de no hablar de problemas o soluciones en esta sección, se tratarán por separado.</p>
<p>Problema: ¿Cuál es el problema que surge de este contexto que ahora debemos resolver y donde se necesita una decisión arquitectónica? ¿Qué complica el problema? ¿Cuáles son las consecuencias? Este ejercicio le ayudará a formular el problema real para sus usuarios y evitar que la solución técnica dicte su problema.</p>
<p>Opciones: Para cada opción, describimos brevemente la solución propuesta, sus implicaciones, pros y contras. También siempre agrego una opción de “No hacer nada”. Esto ayuda a señalar las consecuencias que suceden si mantienes todo como está. Es posible que descubra que podría ser aceptable no hacer nada, o podría ayudarlo a señalar a la gerencia por qué un problema necesita atención inmediata. También siempre agrego explícitamente opciones que obviamente no haremos. Solo agregarlos como una opción a los ADR no significa que estemos considerando hacerlo. Pero ayuda documentar que ha considerado todas las opciones y deliberadamente elige no elegirla. También ayuda responder “Oye, ¿por qué no usamos xyz” más tarde?</p>
<p>Decisión: ¿Qué opción se ha elegido finalmente? Si se ha tomado una decisión final, la marcamos también como la opción elegida en la sección de “opciones”. Una decisión también puede ser que dependa de la tribu elegir entre diferentes opciones (es decir, no vemos consecuencias negativas al elegir una u otra o que diferentes tribus elijan diferentes soluciones).</p>
<p>Próximos pasos: hasta que el ADR alcance el estado “Decidido”, nos aseguramos de que el ADR registre quién debe hacer qué a continuación (por ejemplo, Alice investigará si el uso de FooService proporciona un punto final de Bar). Como es una buena práctica con cada elemento de acción, le asignamos un nombre y una fecha.</p>
<p>Temporalidad: un registro simple que contiene una entrada para cada transición de estado y modificación (significativa) del documento. También anunciamos aquí cuándo finalizará el RFC.</p>
<hr />
<blockquote>
<p>E-Service. Fase II</p>
<p>PRY01 Gobierno SOA. Contenido de los Productos Contractuales</p>
<p>Contrato 1812020</p>
<p>FNA, Stefanini</p>
<p>26 Jul 2023</p>
<p><strong>Versión</strong> 1.4b97708</p>
</blockquote>
<p><br></p>
<h1 id="producto-3-pr03.-diseño-de-los-procesos-y-responsabilidades-del-comité-de-gobierno">Producto 3: PR03. Diseño de los Procesos y Responsabilidades del Comité de Gobierno</h1>
<p>El comité de gobierno del FNA, PR03 de este proyecto, promueve y establece necesaria la participación de la oficina de arquitectura del FNA (LOAF) con otras áreas pertinentes del FNA. El Comité está basado en los preceptos y roles del Equipo de Arquitectura Ágil (Disciplined Agile® Architecture DA™). Una condición importante es que el comité de arquitectura no sustituye ni supedita a otros existentes en el FNA, tales como el Comité de Control de Cambios, o los que surgen por demás asuntos tecnológicos. Dentro de este comité de gobierno existen roles permitentes a la arquitectura del FNA. Opcionalmente participarán otros roles externos a la oficina, de otras áreas y vicepresidencias del Fondo, como los líderes y grupos de producto.</p>
<blockquote>
<strong>Nota 1</strong>: los roles del Comité de Gobierno de Arquitectura no son posiciones dentro del organigrama del FNA.
<p>
<p><strong>Nota 2</strong>: los análisis de este producto están dirigidos a cumplir los objetivos del proyecto PRY01, Gobierno SOA: desarrollo, gestión, gobierno de arquitectura y adopción.</p>
</blockquote>
<p><br></p>
<h2 id="justificación-1">Justificación</h2>
<p>El Comité de Gobierno de Arquitectura captura y gestiona mediante la bitácora de decisiones de arquitectura del FNA (BDA) las razones, cambios, reformas, transiciones que están detrás de los requerimientos de arquitectura del FNA (flexibilidad, confiabilidad, rendimiento, mantenibilidad). El Comité comunicará y establecerá responsabilidades directas que de las adaptaciones se deriven a fin de proveer el rastro pertinente a los revisores de estas modificaciones determinadas por la oficina de arquitectura y por este. El Comité de Gobierno de Arquitectura del FNA es, por tanto, la instancia donde se dirimen y dirigen los requerimientos de arquitectura de mediano y largo plazo (TOGAF, Architecture Requirement Specification), que muchas veces son del tipo de adaptación o migración a una nueva tecnología exclusivas de las arquitecturas del FNA.</p>
<h2 id="contenidos-1">Contenidos</h2>
<ol type="1">
<li>Descripción del Comité de Gobierno de Arquitecturas del FNA: ámbitos y alcances del comité</li>
<li>Consideraciones para la puesta en marcha de la bitácora de decisiones de arquitectura</li>
<li>Repositorio y gestión de los requerimientos de arquitectura del FNA (flexibilidad, confiabilidad, rendimiento, mantenibilidad)</li>
<li>Métodos de evaluación de arquitecturas para el FNA</li>
</ol>
<p><br></p>
<h2 id="criterios-de-aceptación-1">Criterios de Aceptación</h2>
<ul>
<li>Especificaciones de la bitácora de decisiones de arquitectura</li>
<li>Especificaciones de funcionamiento del Comité de Gobierno de Arquitecturas del FNA</li>
<li>Esquema de comunicación y publicación de cambios a las arquitecturas del FNA</li>
</ul>
<p><br></p>
<h2 id="modelo-de-implementación-del-pry01-1">Modelo de Implementación del PRY01</h2>
<div id="fig:4bba10ee-830f-4dcb-a3f0-f09c40d648b7" class="fignos">
<figure>
<img src="images/pry1gobierno.jpg" alt="Imagen 16: Plan de Implementación del Proyecto Hoja de Ruta E-Service FNA, 2023. Abril 2023 a Agosto 2023" />
<figcaption aria-hidden="true"><span>Imagen 16:</span> Plan de Implementación del Proyecto Hoja de Ruta E-Service FNA, 2023. Abril 2023 a Agosto 2023</figcaption>
</figure>
</div>
<p><em>Fuente: Elaboración propia.</em></p>
<p><br></p>
<hr />
<div style="page-break-before: always;">

</div>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Comité de Arquitectura del FNA: <strong>Descripción del Comité de Gobierno de Arquitecturas del FNA</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Comité de arquitectura, Funciones, Responsabilidades, RACI</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td><strong>1.4b97708</strong> del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h1 id="el-comité-de-arquitectura-del-fna">El Comité de Arquitectura del FNA</h1>
<h2 id="descripción-del-comité-de-gobierno-de-arquitecturas-del-fna-ámbitos-y-alcances-del-comité">Descripción del Comité de Gobierno de Arquitecturas del FNA: ámbitos y alcances del comité</h2>
<p>Otro de los instrumentos en donde se materializa el gobierno SOA, objeto de este proyecto, es el comité de revisión y de trabajos de arquitectura (Comité de Arquitectura del FNA, para abreviar). El comité de arquitectura contribuye al gobierno al realizar tareas de revisión, decisión, seguimiento (en menor grado) y divulgación de trabajos de arquitectura.</p>
<p>Es de su despacho armonizar los requisitos arquitectónicos macro del FNA, que de otra manera divergirían o prevalecerían las opiniones en lugar de los criterios. Por esta razón, su principal objetivo (objetivo general) es garantizar que las visiones y los estándares de la oficina de arquitectura estén alineados con el gobierno SOA del FNA, y por ende, con el correcto uso del repositorio de arquitectura del FNA (RAF).</p>
<p>En el siguiente diagrama resumimos la actuación y colaboración del modelo operativo del Comité de Arquitectura.</p>
<div id="fig:a4f8ab35-4742-4f49-87d6-b47018738221" class="fignos">
<figure>
<img src="images/comiteModelo.png" alt="Imagen 17: Comité de Arquitectura en colaboración y cumplimiento con otras áreas del FNA." />
<figcaption aria-hidden="true"><span>Imagen 17:</span> Comité de Arquitectura en colaboración y cumplimiento con otras áreas del FNA.</figcaption>
</figure>
</div>
<p><em>Fuente: elaboración propia.</em></p>
<p><br></p>
<p>Es posibilidad del Comité acceder a los modelos, a los que evaluará. Así mismo, debe poder acceder a las capacidades de gestión de requerimientos de arquitectura, y al registro de decisiones en donde consignará sus resoluciones (ver <a href="https://stefaninilatam.sharepoint.com/SitePages/Home.aspx">Funciones del Comité, más adelante</a>).</p>
<h2 id="objetivo-principal-del-comité-de-arquitectura-del-fna-caf">Objetivo Principal del Comité de Arquitectura del FNA (CAF)</h2>
<p>El objetivo principal del Comité de Arquitectura del FNA es garantizar que las visiones y los estándares de la oficina de arquitectura estén alineados con el modelo de gobierno SOA del FNA (ver <a href="onenote:#N003a.com">Modelo de Gobierno y CCF</a>).</p>
<h2 id="objetivos-específicos-del-caf-comité-de-arquitectura-fna">Objetivos Específicos del CAF (comité de arquitectura FNA)</h2>
<p>Para alcanzar el objetivo principal, los actores del comité deben perseguir, y gestionar, el logro de los siguientes objetivos específicos y beneficios.</p>
<ul>
<li>Guiar y priorización los esfuerzos de la oficina de arquitectura</li>
<li>Ejercitar los roles y responsabilidades del gobierno SOA del FNA, y respaldar su supervisión y la rendición de cuentas de la oficina de arquitectura</li>
<li>Efectivizar el proceso de toma de decisiones sobre los trabajos de arquitectura</li>
<li>Verificar la aplicación de los métodos (procedimientos normales) de arquitectura del FNA y del gobierno SOA del FNA</li>
<li>Fomentar el uso de herramientas de publicación automatizable por audiencia de los puntos de vista de los trabajos de arquitectura</li>
<li>Divulgar el valor empresarial ampliado y elevado de la arquitectura SOA a las áreas relacionadas con TI del FNA</li>
<li>Procurar la visibilidad de las otras áreas del FNA del trabajo de la oficina de arquitectura</li>
</ul>
<p><br></p>
<h2 id="funciones-del-comité">Funciones del Comité</h2>
<p>El comité de arquitectura tiene dos funciones básicas. Es decir, lo que se espera que el comité responda es:
1. FUNC10. Dirimir (decisiones)
1. FUNC11. Divulgar (resoluciones)
1. FUNC13. Evaluación (arquitecturas)</p>
<h3 id="función-de-dirimir-func11">Función de Dirimir (FUNC11)</h3>
<p>El Comité debe proporcionar herramientas y contar con métodos precisos para avalar una decisión de arquitectura sobre otra. Además, en arreglo al principio de paridad y ponderación, las decisiones de arquitectura no pueden generar ventajas a terceros por los diseños propuestos.</p>
<p>Esta función debe ejecutarse en modalidad eventual: cuando en la llegada de un trabajo de arquitectura, la Oficina determina que requiere una sesión del Comité (CAF) para acordar una solución de carácter impactante para la empresa. Las condiciones impactantes, están relacionadas con los análisis primarios de complejidad, impacto y costo/beneficio descritos en el modelo operativo de este gobierno, objeto del proyecto.</p>
<h3 id="función-de-divulgar-func12">Función de Divulgar (FUNC12)</h3>
<p>Esta función tiene dos modalidades. Primero, la de evidenciar. El Comité (CAF) debe evidenciar, en todo momento, las consideraciones y soportes que condujeron a las conclusiones tras una decisión de arquitectura. Para esto, es fundamental la Bitácora de Decisiones, capacidad que debe procurar el repositorio de arquitectura del FNA, de cuya efectividad se desprende la característica de relacionamiento entre bloques de construcción de los modelos (ver <a href="onenote:#N003a.com">Bloques de Construcción Requeridos por Arquitectura, en Flujos de Trabajo Oficina de Arquitectura</a>).</p>
<p>Esta función debe con frecuencia eventual: cuando le sea requerido por la Vicepresidencia de Tecnología del FNA.</p>
<p>La segunda modalidad de esta función es la de comunicar. El Comité (CAF) debe reunir a las partes interesadas en conocer los avances teóricos, prácticos y metodológicos que considere pertinentes que la empresa conozca.</p>
<p>Esta función debe con frecuencia periódica trimestral: cada 3 meses.</p>
<h3 id="función-de-evaluar-func13">Función de Evaluar (FUNC13)</h3>
<p>El Comité debe mantener y aplicar métodos de evaluación de arquitectura actualizados y particularizados según los aspectos de esta a evaluar: Estandarización, Cohesión, Reutilización y Retorno de Beneficio (ver <a href="https://stefaninilatam.sharepoint.com/SitePages/Home.aspx">Políticas de la Oficina de Arquitectura del FNA</a>).</p>
<p>Esta función debe ejecutarse con frecuencia periódica mensual.</p>
<p><br></p>
<div style="page-break-before: always;">

</div>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Comité de Arquitectura del FNA: <strong>Bitácora de Decisiones de Arquitectura</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Comité de arquitectura, Funciones, Responsabilidades, RACI</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td><strong>1.4b97708</strong> del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h1 id="bitácora-de-decisiones-de-arquitectura-1">Bitácora de Decisiones de Arquitectura</h1>
<p>La bitácora de decisiones es una herramienta para gestionar la toma de decisiones de arquitectura. Por tal razón, estructurar y genera gestión seguimiento, (versión y trazabilidad) a las discusiones de la oficina de arquitectura del FNA. El objetivo de esta herramienta es el de consensuar a todos los arquitectos alrededor del mismo contexto, problema, restricciones, conveniencia (pro/con), alternativas y opciones de solución.</p>
<h2 id="consideraciones-para-operar-la-bitácora">Consideraciones para Operar la Bitácora</h2>
<h3 id="registro-histórico-y-diferencial-versiones">Registro Histórico y Diferencial (versiones)</h3>
<p>La bitácora de decisiones de arquitectura (BDA, o ADR por sus siglas en inglés) debe registrar las entradas en dos dimensiones: temporal (histórico o horizontal) y diferencial (vertical o distinción de cambios). Características de los sistemas de configuración o versionamiento (SCM, por sus siglas en inglés) implementan ambas dimensiones en lo que a código o texto se refiere.</p>
<p>Por tal motivo, recomendamos que la bitácora pueda ser implementada en una herramienta SCM, como <em>Git</em>, o similar, que cuenta con las características antes descritas de temporalidad y diferencia (distinción de cambios).</p>
<h3 id="formato-para-la-bitácora-de-arquitectura-ard">Formato para la Bitácora de Arquitectura (ARD)</h3>
<p>La bitácora de decisiones de arquitectura (BDA, o ADR por sus siglas en inglés) es una herramienta para ejercitar el proceso de toma de decisiones de la oficina. La bitácora estructura y sigue (versión y trazabilidad) las discusiones de la oficina de arquitectura del FNA. Cumple el objetivo de materializar el consenso entre los arquitectos elevándolo a un grado oficial, al tiempo que reúne a la oficina alrededor del mismo contexto, problema, restricciones, conveniencia (pro/con), alternativas y opciones de solución.</p>
<p>Existen muchas plantillas para esta herramienta. Proponemos la siguiente.</p>
<h3 id="especificaciones-1">Especificaciones</h3>
<ul>
<li>Tipo de contenido: texto</li>
<li>Documento versionado</li>
<li>Referencias a partes y elementos del modelo</li>
<li>Referencias a imágenes y contenidos del repositorio de arquitectura FNA</li>
</ul>
<h3 id="formato-1">Formato</h3>
<ul>
<li><p>Título: El título siempre comienza con la fecha en formato AAAA-MM-DD siempre que contenga una descripción concisa de lo que trata el ADR. Y encontrar una buena descripción no siempre es tan fácil: como todos sabemos, nombrar cosas es una de las dos cosas difíciles en informática, así que tómate tu tiempo y piensa un poco en ello. Tu futuro te lo agradecerá después. El formato de fecha se elige de modo que el orden alfabético también sea el orden de fecha correcto.</p></li>
<li><p>Participantes: Lista de involucrados que participaron en una sesión o discusión del comité. Esto ayuda a generar la memoria para responder y aclarar preguntas como “¿le preguntaron al ingeniero encargado de tal aplicación, o al desarrollador?” o “¿estuvo involucrada la gestión de productos en esta decisión?”. Esta memoria es clave luego de meses de la sesión.</p></li>
<li><p>Estado: Definimos cuatro estados diferentes en los que una entrada de la BDA (ADR) puede estar:</p>
<ul>
<li>Abierto: Se ha registrado como un problema, es posible que aún falte información y aún no se ha iniciado la discusión.</li>
<li>En Progreso: La discusión continúa actualmente.</li>
<li>RFC: se ha recopilado toda la información necesaria, se ha tomado una decisión propuesta y ahora todos pueden comentarla (“Solicitud de comentarios”).</li>
<li>Decidido: este es el estado final: cuando se tomó y registró una decisión y todos tuvieron la oportunidad justa de proporcionar comentarios. Después de eso, el ADR se cierra. Se considera una mala práctica modificar las ADR más adelante. Sin embargo, lo que hago de vez en cuando es agregar a las ADR si hay nueva información disponible.</li>
</ul></li>
<li><p>Situación: Aquí describimos la situación actual usando solo hechos. ¿Que estamos haciendo? ¿Cuál es el contexto de esta decisión? ¿Cuáles son las premisas y supuestos para que se sostenga esta decisión? Si es necesario, mencione también lo que explícitamente no está dentro del alcance. Tenga mucho cuidado de no hablar de problemas o soluciones en esta sección, se tratarán por separado.</p></li>
<li><p>Problema: ¿Cuál es el problema que surge de este contexto que ahora debemos resolver y donde se necesita una decisión arquitectónica? ¿Qué complica el problema? ¿Cuáles son las consecuencias? Este ejercicio le ayudará a formular el problema real para sus usuarios y evitar que la solución técnica dicte su problema.</p></li>
<li><p>Opciones: Para cada opción, describimos brevemente la solución propuesta, sus implicaciones, pros y contras. También siempre agrego una opción de “No hacer nada”. Esto ayuda a señalar las consecuencias que suceden si mantienes todo como está. Es posible que descubra que podría ser aceptable no hacer nada, o podría ayudarlo a señalar a la gerencia por qué un problema necesita atención inmediata. También siempre agrego explícitamente opciones que obviamente no haremos. Solo agregarlos como una opción a los ADR no significa que estemos considerando hacerlo. Pero ayuda documentar que ha considerado todas las opciones y deliberadamente elige no elegirla. También ayuda responder “Oye, ¿por qué no usamos xyz” más tarde?</p></li>
<li><p>Decisión: ¿Qué opción se ha elegido finalmente? Si se ha tomado una decisión final, la marcamos también como la opción elegida en la sección de “opciones”. Una decisión también puede ser que dependa de la tribu elegir entre diferentes opciones (es decir, no vemos consecuencias negativas al elegir una u otra o que diferentes tribus elijan diferentes soluciones).</p></li>
<li><p>Continuidad: hasta que el ADR alcance el estado “Decidido”, nos aseguramos de que el ADR registre quién debe hacer qué a continuación (por ejemplo, Alice investigará si el uso de FooService proporciona un punto final de Bar). Como es una buena práctica con cada elemento de acción, le asignamos un nombre y una fecha.</p></li>
<li><p>Temporalidad: un registro simple que contiene una entrada para cada transición de estado y modificación (significativa) del documento. También anunciamos aquí cuándo finalizará el RFC.</p></li>
</ul>
<div style="page-break-before: always;">

</div>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Comité de Arquitectura del FNA: <strong>Métodos de evaluación de arquitecturas para el FNA</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Comité de arquitectura, Funciones, Responsabilidades, RACI</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Versión</td>
<td><strong>1.4b97708</strong> del 26 Jul 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="onenote:#N001d.sharepoint.com">Ejecución Plan de Trabajo SOA</a>; <a href="onenote:#N003a.com">Procesos de Negocio FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h1 id="métodos-de-evaluación-de-arquitecturas-para-el-fna">Métodos de Evaluación de Arquitecturas para el FNA</h1>
<p>El Comité de arquitectura tiene la función de evaluación de arquitecturas (FUNC13. Evaluación de arquitecturas, en <a href="03n.1.descripcion%20comite.md">Descripción del Comité de Gobierno de Arquitecturas del FNA: ámbitos y alcances del comité</a>). Para ello, y para no dilatar a los mismos procesos de arquitectura, ni a procesos asociados de ingeniería, los involucrados del Comité del FNA deberán aplicar método de evaluación de arquitectura abreviados e independientes de proveedor, fabricante o producto.</p>
<h2 id="características-del-método-de-evaluación-de-arquitecturas">Características del Método de Evaluación de Arquitecturas</h2>
<p>Para esta versión del Gobierno SOA del FNA establecemos que el método de evaluación de arquitectura debe ser una versión simplificada y efectiva de los métodos existentes. Bajo esa condición, puede ser cualquiera de los métodos generalmente aceptados, siempre que:</p>
<ul>
<li>Guarde compatibilidad con ATAM (Open Group)</li>
<li>Cumpla además con las siguientes características</li>
</ul>
<p>Las características mínimas que el método seleccionado debe cumplir son</p>
<ol type="1">
<li>Debe estar ordenada en aspectos, como mínimo
<ol type="1">
<li>Riesgos técnicos</li>
<li>Puntos de Sensibilidad al Cambio</li>
<li>Compensaciones</li>
<li>Costo / Beneficio</li>
</ol></li>
<li>Debe estar implementado por elementos básicos y las operaciones sobre estos
<ol type="1">
<li>Escenarios de calidad: elaboración de escenarios</li>
<li>Sistema de puntuación: evaluación de escenarios (puntaje)</li>
<li>Árbol de utilidad (diversificación): proveer alternativas de caminos
y puntajes de un escenario</li>
</ol></li>
</ol>
<h3 id="escenarios">Escenarios</h3>
<p>Los escenarios de evaluación, en este contexto, son las operaciones más usadas por el negocio.</p>
<h3 id="métodos-de-evaluación-de-arquitectura-recomendados-para-el-fna">Métodos de Evaluación de Arquitectura Recomendados para el FNA</h3>
<p>Es exigible que cualquier que sea el método que el comité aplique regularmente o por excepción, deberá estar acotado al contexto del Fondo Nacional del Ahorro, esto es, deben estar diseñados y acondicionados a la empresa.</p>
<p>Los métodos que recomendados a continuación deberán pasar por un proceso de diseño y acondicionamiento requerido.</p>
<ol type="1">
<li>Método de Evaluación de Arquitectura, ATAM. Open Group</li>
<li>Método de Revisión de Arquitecturas de Solución, Simon Field, bajo licencia Creative Commons 4.0. <a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></li>
</ol>
<div style="page-break-before: always;">

</div>
<h1 class="page_break_before" id="referencias">Referencias</h1>
<!-- Explicitly insert bibliography here -->
<div id="refs" role="doc-bibliography">
E-Service. Situación SOA Actual del FNA. Etapa I. (2022).
</div>
<div id="refs" role="doc-bibliography">
E-Service. Arquitectura de Referencia del FNA. Etapa II. (2023).
</div>
<div id="refs" role="doc-bibliography">
E-Service. Hoja de Ruta e Iniciativas. Etapa III. (2023).
</div>
<div id="refs" role="doc-bibliography">
TOGAF 9.1. Risk Management (2023). En https://pubs.opengroup.org/architecture/togaf9-doc/arch/chap27.html
</div>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>Niveles de detalle de la ingeniería: https://editeca.com/lod-nivel-de-desarrollo/<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Niveles de detalle de la ingeniería: https://editeca.com/lod-nivel-de-desarrollo/<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>ABB y CBB, TOGAF 9.1. Características generales. En https://pubs.opengroup.org/architecture/togaf9-doc/arch/chap33.html.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="https://sarm.org.uk">SARM</a>. Solution Architecture Review Method is a formal method for evaluating solution designs. It provides a means of exploring alternative ways of implementing (or acquiring) a solution in a structured manner, taking into account the different stakeholder interests in the solution, and ensuring that the relative merits and disadvantages of competing solutions are properly considered. Its application prior to the implementation of a new or changed solution will help ensure that the new design best meets the complex needs of all interested parties. The method also includes an optional Cost Benefit analysis, which presents a financial comparison of competing solution designs. Potential benefits are adjusted to reflect the likely outcome for each solution option, based on the evaluation of the review team, leading to a “value for money” assessment of the competing solutions.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!-- default theme -->

<style>
  /* import google fonts */
  @import url("https://fonts.googleapis.com/css?family=Open+Sans:400,600,700");
  @import url("https://fonts.googleapis.com/css?family=Source+Code+Pro");

  /* -------------------------------------------------- */
  /* global */
  /* -------------------------------------------------- */

  /* all elements */
  * {
    /* force sans-serif font unless specified otherwise */
    font-family: "Open Sans", "Helvetica", sans-serif;

    /* prevent text inflation on some mobile browsers */
    -webkit-text-size-adjust: none !important;
    -moz-text-size-adjust: none !important;
    -o-text-size-adjust: none !important;
    text-size-adjust: none !important;
  }

  @media only screen {
    /* "page" element */
    body {
      position: relative;
      box-sizing: border-box;
      font-size: 12pt;
      line-height: 1.5;
      max-width: 8.5in;
      margin: 20px auto;
      padding: 40px;
      border-radius: 5px;
      border: solid 1px #bdbdbd;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background: #ffffff;
    }
  }

  /* when on screen < 8.5in wide */
  @media only screen and (max-width: 8.5in) {
    /* "page" element */
    body {
      padding: 20px;
      margin: 0;
      border-radius: 0;
      border: none;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05) inset;
      background: none;
    }
  }

  /* -------------------------------------------------- */
  /* headings */
  /* -------------------------------------------------- */

  /* all headings */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin: 20px 0;
    padding: 0;
    font-weight: bold;
  }

  /* biggest heading */
  h1 {
    margin: 40px 0;
    text-align: center;
  }

  /* second biggest heading */
  h2 {
    margin-top: 30px;
    padding-bottom: 5px;
    border-bottom: solid 1px #bdbdbd;
  }

  /* heading font sizes */
  h1 {
    font-size: 2em;
  }
  h2 {
    font-size: 1.5em;
  }
  h3 {
    font-size: 1.35em;
  }
  h4 {
    font-size: 1.25em;
  }
  h5 {
    font-size: 1.15em;
  }
  h6 {
    font-size: 1em;
  }

  /* -------------------------------------------------- */
  /* manuscript header */
  /* -------------------------------------------------- */

  /* manuscript title */
  header > h1 {
    margin: 0;
  }

  /* manuscript title caption text (ie "automatically generated on") */
  header + p {
    text-align: center;
    margin-top: 10px;
  }

  /* -------------------------------------------------- */
  /* text elements */
  /* -------------------------------------------------- */

  /* links */
  a {
    color: #2196f3;
    overflow-wrap: break-word;
  }

  /* superscripts and subscripts */
  sub,
  sup {
    /* prevent from affecting line height */
    line-height: 0;
  }

  /* unordered and ordered lists*/
  ul,
  ol {
    padding-left: 20px;
  }

  /* class for styling text semibold */
  .semibold {
    font-weight: 600;
  }

  /* class for styling elements horizontally left aligned */
  .left {
    display: block;
    text-align: left;
    margin-left: auto;
    margin-right: 0;
    justify-content: left;
  }

  /* class for styling elements horizontally centered */
  .center {
    display: block;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    justify-content: center;
  }

  /* class for styling elements horizontally right aligned */
  .right {
    display: block;
    text-align: right;
    margin-left: 0;
    margin-right: auto;
    justify-content: right;
  }

  /* -------------------------------------------------- */
  /* section elements */
  /* -------------------------------------------------- */

  /* horizontal divider line */
  hr {
    border: none;
    height: 1px;
    background: #bdbdbd;
  }

  /* paragraphs, horizontal dividers, figures, tables, code */
  p,
  hr,
  figure,
  table,
  pre {
    /* treat all as "paragraphs", with consistent vertical margins */
    margin-top: 20px;
    margin-bottom: 20px;
  }

  /* -------------------------------------------------- */
  /* figures */
  /* -------------------------------------------------- */

  /* figure */
  figure {
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* figure caption */
  figcaption {
    padding: 0;
    padding-top: 10px;
  }

  /* figure image element */
  figure > img,
  figure > svg {
    max-width: 100%;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  /* figure auto-number */
  img + figcaption > span:first-of-type,
  svg + figcaption > span:first-of-type {
    font-weight: bold;
    margin-right: 5px;
  }

  /* -------------------------------------------------- */
  /* tables */
  /* -------------------------------------------------- */

  /* table */
  table {
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* table cells */
  th,
  td {
    border: solid 1px #bdbdbd;
    padding: 10px;
    /* squash table if too wide for page by forcing line breaks */
    overflow-wrap: break-word;
    word-break: break-word;
  }

  /* header row and even rows */
  th,
  tr:nth-child(2n) {
    background-color: #fafafa;
  }

  /* odd rows */
  tr:nth-child(2n + 1) {
    background-color: #ffffff;
  }

  /* table caption */
  caption {
    text-align: left;
    padding: 0;
    padding-bottom: 10px;
  }

  /* table auto-number */
  table > caption > span:first-of-type {
    font-weight: bold;
    margin-right: 5px;
  }

  /* -------------------------------------------------- */
  /* code */
  /* -------------------------------------------------- */

  /* multi-line code block */
  pre {
    padding: 10px;
    background-color: #eeeeee;
    color: #000000;
    border-radius: 5px;
    break-inside: avoid;
    text-align: left;
  }

  /* inline code, ie code within normal text */
  :not(pre) > code {
    padding: 0 4px;
    background-color: #eeeeee;
    color: #000000;
    border-radius: 5px;
  }

  /* code text */
  /* apply all children, to reach syntax highlighting sub-elements */
  code,
  code * {
    /* force monospace font */
    font-family: "Source Code Pro", "Courier New", monospace;
  }

  /* -------------------------------------------------- */
  /* quotes */
  /* -------------------------------------------------- */

  /* quoted text */
  blockquote {
    margin: 0;
    padding: 0;
    border-left: 4px solid #bdbdbd;
    padding-left: 16px;
    break-inside: avoid;
  }

  /* -------------------------------------------------- */
  /* banners */
  /* -------------------------------------------------- */

  /* info banners */
  .banner {
    box-sizing: border-box;
    display: block;
    position: relative;
    width: 100%;
    margin-top: 20px;
    margin-bottom: 20px;
    padding: 20px;
    text-align: center;
  }

  /* paragraph in banner */
  .banner > p {
    margin: 0;
  }

  /* -------------------------------------------------- */
  /* highlight colors */
  /* -------------------------------------------------- */

  .white {
    background: #ffffff;
  }
  .lightgrey {
    background: #eeeeee;
  }
  .grey {
    background: #757575;
  }
  .darkgrey {
    background: #424242;
  }
  .black {
    background: #000000;
  }
  .lightred {
    background: #ffcdd2;
  }
  .lightyellow {
    background: #ffecb3;
  }
  .lightgreen {
    background: #dcedc8;
  }
  .lightblue {
    background: #e3f2fd;
  }
  .lightpurple {
    background: #f3e5f5;
  }
  .red {
    background: #f44336;
  }
  .orange {
    background: #ff9800;
  }
  .yellow {
    background: #ffeb3b;
  }
  .green {
    background: #4caf50;
  }
  .blue {
    background: #2196f3;
  }
  .purple {
    background: #9c27b0;
  }
  .white,
  .lightgrey,
  .lightred,
  .lightyellow,
  .lightgreen,
  .lightblue,
  .lightpurple,
  .orange,
  .yellow,
  .white a,
  .lightgrey a,
  .lightred a,
  .lightyellow a,
  .lightgreen a,
  .lightblue a,
  .lightpurple a,
  .orange a,
  .yellow a {
    color: #000000;
  }
  .grey,
  .darkgrey,
  .black,
  .red,
  .green,
  .blue,
  .purple,
  .grey a,
  .darkgrey a,
  .black a,
  .red a,
  .green a,
  .blue a,
  .purple a {
    color: #ffffff;
  }

  /* -------------------------------------------------- */
  /* buttons */
  /* -------------------------------------------------- */

  /* class for styling links like buttons */
  .button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    margin: 5px;
    padding: 10px 20px;
    font-size: 0.75em;
    font-weight: 600;
    text-transform: uppercase;
    text-decoration: none;
    letter-spacing: 1px;
    background: none;
    color: #2196f3;
    border: solid 1px #bdbdbd;
    border-radius: 5px;
  }

  /* buttons when hovered */
  .button:hover:not([disabled]),
  .icon_button:hover:not([disabled]) {
    cursor: pointer;
    background: #f5f5f5;
  }

  /* buttons when disabled */
  .button[disabled],
  .icon_button[disabled] {
    opacity: 0.35;
    pointer-events: none;
  }

  /* class for styling buttons containg only single icon */
  .icon_button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    margin: 0;
    padding: 0;
    background: none;
    border-radius: 5px;
    border: none;
    width: 20px;
    height: 20px;
    min-width: 20px;
    min-height: 20px;
  }

  /* icon button inner svg image */
  .icon_button > svg {
    height: 16px;
  }

  /* -------------------------------------------------- */
  /* icons */
  /* -------------------------------------------------- */

  /* class for styling icons inline with text */
  .inline_icon {
    height: 1em;
    position: relative;
    top: 0.125em;
  }

  /* -------------------------------------------------- */
  /* references */
  /* -------------------------------------------------- */

  .csl-entry {
    margin-top: 15px;
    margin-bottom: 15px;
  }

  /* -------------------------------------------------- */
  /* print control */
  /* -------------------------------------------------- */

  @media print {
    @page {
      /* suggested printing margin */
      margin: 0.5in;
    }

    /* document and "page" elements */
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }

    /* "page" element */
    body {
      font-size: 11pt !important;
      line-height: 1.35;
    }

    /* all headings */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 15px 0;
    }

    /* figures and tables */
    figure,
    table {
      font-size: 0.85em;
    }

    /* table cells */
    th,
    td {
      padding: 5px;
    }

    /* shrink font awesome icons */
    i.fas,
    i.fab,
    i.far,
    i.fal {
      transform: scale(0.85);
    }

    /* decrease banner margins */
    .banner {
      margin-top: 15px;
      margin-bottom: 15px;
      padding: 15px;
    }

    /* class for centering an element vertically on its own page */
    .page_center {
      margin: auto;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      vertical-align: middle;
      break-before: page;
      break-after: page;
    }

    /* always insert a page break before the element */
    .page_break_before {
      break-before: page;
    }

    /* always insert a page break after the element */
    .page_break_after {
      break-after: page;
    }

    /* avoid page break before the element */
    .page_break_before_avoid {
      break-before: avoid;
    }

    /* avoid page break after the element */
    .page_break_after_avoid {
      break-after: avoid;
    }

    /* avoid page break inside the element */
    .page_break_inside_avoid {
      break-inside: avoid;
    }
  }

  /* -------------------------------------------------- */
  /* override pandoc css quirks */
  /* -------------------------------------------------- */

  .sourceCode {
    /* prevent unsightly overflow in wide code blocks */
    overflow: auto !important;
  }

  div.sourceCode {
    /* prevent background fill on top-most code block  container */
    background: none !important;
  }

  .sourceCode * {
    /* force consistent line spacing */
    line-height: 1.5 !important;
  }

  div.sourceCode {
    /* style code block margins same as <pre> element */
    margin-top: 20px;
    margin-bottom: 20px;
  }

  /* -------------------------------------------------- */
  /* tablenos */
  /* -------------------------------------------------- */

  /* tablenos wrapper */
  .tablenos {
    width: 100%;
    margin: 20px 0;
  }

  .tablenos > table {
    /* move margins from table to table_wrapper to allow margin collapsing */
    margin: 0;
  }

  @media only screen {
    /* tablenos wrapper */
    .tablenos {
      /* show scrollbar on tables if necessary to prevent overflow */
      overflow-x: auto !important;
    }

    .tablenos th,
    .tablenos td {
      overflow-wrap: unset !important;
      word-break: unset !important;
    }

    /* table in wrapper */
    .tablenos table,
    .tablenos table * {
      /* don't break table words */
      overflow-wrap: normal !important;
    }
  }
</style>
<!-- 
    Plugin Core

    Functions needed for and shared across all first-party plugins.
-->

<script>
  // get element that is target of hash (from link element or url)
  function getHashTarget(link) {
    const hash = link ? link.hash : window.location.hash;
    const id = hash.slice(1);
    let target = document.querySelector(`[id="${id}"]`);
    if (!target) return;

    // if figure or table, modify target to get expected element
    if (id.indexOf("fig:") === 0) target = target.querySelector("figure");
    if (id.indexOf("tbl:") === 0) target = target.querySelector("table");

    return target;
  }

  // get position/dimensions of element or viewport
  function getRectInView(element) {
    let rect = {};
    rect.left = 0;
    rect.top = 0;
    rect.right = document.documentElement.clientWidth;
    rect.bottom = document.documentElement.clientHeight;
    let style = {};

    if (element instanceof HTMLElement) {
      rect = element.getBoundingClientRect();
      style = window.getComputedStyle(element);
    }

    const margin = {};
    margin.left = parseFloat(style.marginLeftWidth) || 0;
    margin.top = parseFloat(style.marginTopWidth) || 0;
    margin.right = parseFloat(style.marginRightWidth) || 0;
    margin.bottom = parseFloat(style.marginBottomWidth) || 0;

    const border = {};
    border.left = parseFloat(style.borderLeftWidth) || 0;
    border.top = parseFloat(style.borderTopWidth) || 0;
    border.right = parseFloat(style.borderRightWidth) || 0;
    border.bottom = parseFloat(style.borderBottomWidth) || 0;

    const newRect = {};
    newRect.left = rect.left + margin.left + border.left;
    newRect.top = rect.top + margin.top + border.top;
    newRect.right = rect.right + margin.right + border.right;
    newRect.bottom = rect.bottom + margin.bottom + border.bottom;
    newRect.width = newRect.right - newRect.left;
    newRect.height = newRect.bottom - newRect.top;

    return newRect;
  }

  // get position of element relative to page
  function getRectInPage(element) {
    const rect = getRectInView(element);
    const body = getRectInView(document.body);

    const newRect = {};
    newRect.left = rect.left - body.left;
    newRect.top = rect.top - body.top;
    newRect.right = rect.right - body.left;
    newRect.bottom = rect.bottom - body.top;
    newRect.width = rect.width;
    newRect.height = rect.height;

    return newRect;
  }

  // get closest element before specified element that matches query
  function firstBefore(element, query) {
    while (element && element !== document.body && !element.matches(query))
      element = element.previousElementSibling || element.parentNode;

    return element;
  }

  // check if element is part of collapsed heading
  function isCollapsed(element) {
    while (element && element !== document.body) {
      if (element.dataset.collapsed === "true") return true;
      element = element.parentNode;
    }
    return false;
  }

  // expand any collapsed parent containers of element if necessary
  function expandElement(element) {
    if (isCollapsed(element)) {
      // accordion plugin
      const heading = firstBefore(element, "h2");
      if (heading) heading.click();
      // details/summary HTML element
      const summary = firstBefore(element, "summary");
      if (summary) summary.click();
    }
  }

  // scroll to and focus element
  function goToElement(element, offset) {
    // expand accordion section if collapsed
    expandElement(element);
    const y =
      getRectInView(element).top -
      getRectInView(document.documentElement).top -
      (offset || 0);

    // trigger any function listening for "onscroll" event
    window.dispatchEvent(new Event("scroll"));
    window.scrollTo(0, y);
    document.activeElement.blur();
    element.focus();
  }

  // get list of elements after a start element up to element matching query
  function nextUntil(element, query, exclude) {
    const elements = [];
    while (((element = element.nextElementSibling), element)) {
      if (element.matches(query)) break;
      if (!element.matches(exclude)) elements.push(element);
    }
    return elements;
  }
</script>
<!--
  Accordion Plugin

  Allows sections of content under h2 headings to be collapsible.
-->

<script type="module">
  // whether to always start expanded ('false'), always start collapsed
  // ('true'), or start collapsed when screen small ('auto')
  const startCollapsed = "auto";

  // start script
  function start() {
    // run through each <h2> heading
    const headings = document.querySelectorAll("h2");
    for (const heading of headings) {
      addArrow(heading);

      // start expanded/collapsed based on option
      if (
        startCollapsed === "true" ||
        (startCollapsed === "auto" && isSmallScreen()) ||
        heading.dataset.collapsed === "true"
      )
        collapseHeading(heading);
      else expandElement(heading);
    }

    // attach hash change listener to window
    window.addEventListener("hashchange", onHashChange);
  }

  // when hash (eg manuscript.html#introduction) changes
  function onHashChange() {
    const target = getHashTarget();
    if (target) goToElement(target);
  }

  // add arrow to heading
  function addArrow(heading) {
    // add arrow button
    const arrow = document.createElement("button");
    arrow.innerHTML = document.querySelector(".icon_angle_down").innerHTML;
    arrow.classList.add("icon_button", "accordion_arrow");
    heading.insertBefore(arrow, heading.firstChild);

    // attach click listener to heading and button
    heading.addEventListener("click", onHeadingClick);
    arrow.addEventListener("click", onArrowClick);
  }

  // determine if on mobile-like device with small screen
  function isSmallScreen() {
    return Math.min(window.innerWidth, window.innerHeight) < 480;
  }

  // when <h2> heading is clicked
  function onHeadingClick(event) {
    // only collapse if <h2> itself is target of click (eg, user did
    // not click on anchor within <h2>)
    if (event.target === this) toggleCollapse(this);
  }

  // when arrow button is clicked
  function onArrowClick() {
    toggleCollapse(this.parentNode);
  }

  // collapse section if expanded, expand if collapsed
  function toggleCollapse(heading) {
    if (heading.dataset.collapsed === "false") collapseHeading(heading);
    else expandElement(heading);
  }

  // elements to exclude from collapse, such as table of contents panel,
  // hypothesis panel, etc
  const exclude = "#toc_panel, div.annotator-frame, #lightbox_overlay";

  // collapse section
  function collapseHeading(heading) {
    heading.setAttribute("data-collapsed", "true");
    const children = getChildren(heading);
    for (const child of children) child.setAttribute("data-collapsed", "true");
  }

  // expand section
  function expandElement(heading) {
    heading.setAttribute("data-collapsed", "false");
    const children = getChildren(heading);
    for (const child of children) child.setAttribute("data-collapsed", "false");
  }

  // get list of elements between this <h2> and next <h2> or <h1>
  // ("children" of the <h2> section)
  function getChildren(heading) {
    return nextUntil(heading, "h2, h1", exclude);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- angle down icon -->

<template class="icon_angle_down">
  <!-- modified from: https://fontawesome.com/icons/angle-down -->
  <svg width="16" height="16" viewBox="0 0 448 512">
    <path
      fill="currentColor"
      d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* accordion arrow button */
    .accordion_arrow {
      margin-right: 10px;
    }

    /* arrow icon when <h2> data-collapsed attribute true */
    h2[data-collapsed="true"] > .accordion_arrow > svg {
      transform: rotate(-90deg);
    }

    /* all elements (except <h2>'s) when data-collapsed attribute true */
    *:not(h2)[data-collapsed="true"] {
      display: none;
    }

    /* accordion arrow button when hovered and <h2>'s when hovered */
    .accordion_arrow:hover,
    h2[data-collapsed="true"]:hover,
    h2[data-collapsed="false"]:hover {
      cursor: pointer;
    }
  }

  /* always hide accordion arrow button on print */
  @media only print {
    .accordion_arrow {
      display: none;
    }
  }
</style>
<!--
  Anchors Plugin

  Adds an anchor next to each of a certain type of element that provides a
  human-readable url to that specific item/position in the document (e.g.
  "manuscript.html#abstract"). It also makes it such that scrolling out of view
  of a target removes its identifier from the url.
-->

<script type="module">
  // which types of elements to add anchors next to, in "document.querySelector"
  // format
  const typesQuery =
    'h1, h2, h3, div[id^="fig:"], div[id^="tbl:"], span[id^="eq:"]';

  // start script
  function start() {
    // add anchor to each element of specified types
    const elements = document.querySelectorAll(typesQuery);
    for (const element of elements) addAnchor(element);

    // attach scroll listener to window
    window.addEventListener("scroll", onScroll);
  }

  // when window is scrolled
  function onScroll() {
    // if url has hash and user has scrolled out of view of hash
    // target, remove hash from url
    const tolerance = 100;
    const target = getHashTarget();
    if (target) {
      if (
        target.getBoundingClientRect().top > window.innerHeight + tolerance ||
        target.getBoundingClientRect().bottom < 0 - tolerance
      )
        history.pushState(null, null, " ");
    }
  }

  // add anchor to element
  function addAnchor(element) {
    let addTo; // element to add anchor button to

    // if figure or table, modify withId and addTo to get expected
    // elements
    if (element.id.indexOf("fig:") === 0) {
      addTo = element.querySelector("figcaption");
    } else if (element.id.indexOf("tbl:") === 0) {
      addTo = element.querySelector("caption");
    } else if (element.id.indexOf("eq:") === 0) {
      addTo = element.querySelector(".eqnos-number");
    }

    addTo = addTo || element;
    const id = element.id || null;

    // do not add anchor if element doesn't have assigned id.
    // id is generated by pandoc and is assumed to be unique and
    // human-readable
    if (!id) return;

    // create anchor button
    const anchor = document.createElement("a");
    anchor.innerHTML = document.querySelector(".icon_link").innerHTML;
    anchor.title = "Link to this part of the document";
    anchor.classList.add("icon_button", "anchor");
    anchor.dataset.ignore = "true";
    anchor.href = "#" + id;
    addTo.appendChild(anchor);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- link icon -->

<template class="icon_link">
  <!-- modified from: https://fontawesome.com/icons/link -->
  <svg width="16" height="16" viewBox="0 0 512 512">
    <path
      fill="currentColor"
      d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* anchor button */
    .anchor {
      opacity: 0;
      margin-left: 5px;
    }

    /* anchor buttons within <h2>'s */
    h2 .anchor {
      margin-left: 10px;
    }

    /* anchor buttons when hovered/focused and anything containing an anchor button when hovered */
    *:hover > .anchor,
    .anchor:hover,
    .anchor:focus {
      opacity: 1;
    }

    /* anchor button when hovered */
    .anchor:hover {
      cursor: pointer;
    }
  }

  /* always show anchor button on devices with no mouse/hover ability */
  @media (hover: none) {
    .anchor {
      opacity: 1;
    }
  }

  /* always hide anchor button on print */
  @media only print {
    .anchor {
      display: none;
    }
  }
</style>
<!-- 
    Attributes Plugin

    Allows arbitrary HTML attributes to be attached to (almost) any element.
    Place an HTML comment inside or next to the desired element with the content:
    $attribute="value"
-->

<script type="module">
  // start script
  function start() {
    // get list of comments in document
    const comments = findComments();

    for (const comment of comments)
      if (comment.parentElement)
        addAttributes(comment.parentElement, comment.nodeValue.trim());
  }

  // add html attributes to specified element based on string of
  // html attributes and values
  function addAttributes(element, text) {
    // regex's for finding attribute/value pairs in the format of
    // attribute="value" or attribute='value
    const regex2 = /\$([a-zA-Z\-]+)?=\"(.+?)\"/;
    const regex1 = /\$([a-zA-Z\-]+)?=\'(.+?)\'/;

    // loop through attribute/value pairs
    let match;
    while ((match = text.match(regex2) || text.match(regex1))) {
      // get attribute and value from regex capture groups
      let attribute = match[1];
      let value = match[2];

      // remove from string
      text = text.substring(match.index + match[0].length);

      if (!attribute || !value) break;

      // set attribute of parent element
      try {
        element.setAttribute(attribute, value);
      } catch (error) {
        console.log(error);
      }

      // special case for colspan
      if (attribute === "colspan") removeTableCells(element, value);
    }
  }

  // get list of comment elements in document
  function findComments() {
    const comments = [];

    // iterate over comment nodes in document
    function acceptNode(node) {
      return NodeFilter.FILTER_ACCEPT;
    }
    const iterator = document.createNodeIterator(
      document.body,
      NodeFilter.SHOW_COMMENT,
      acceptNode
    );
    let node;
    while ((node = iterator.nextNode())) comments.push(node);

    return comments;
  }

  // remove certain number of cells after specified cell
  function removeTableCells(cell, number) {
    number = parseInt(number);
    if (!number) return;

    // remove elements
    for (; number > 1; number--) {
      if (cell.nextElementSibling) cell.nextElementSibling.remove();
    }
  }

  // start script on DOMContentLoaded instead of load to ensure this plugins
  // runs before other plugins
  window.addEventListener("DOMContentLoaded", start);
</script>
<!--
  Jump to First Plugin

  Adds a button next to each reference entry, figure, and table that jumps the
  page to the first occurrence of a link to that item in the manuscript.
-->

<script type="module">
  // whether to add buttons next to reference entries
  const references = "true";
  // whether to add buttons next to figures
  const figures = "true";
  // whether to add buttons next to tables
  const tables = "true";

  // start script
  function start() {
    if (references !== "false")
      makeButtons(`div[id^="ref-"]`, ".csl-left-margin", "reference");
    if (figures !== "false")
      makeButtons(`div[id^="fig:"]`, "figcaption", "figure");
    if (tables !== "false") makeButtons(`div[id^="tbl:"]`, "caption", "table");
  }

  // when jump button clicked
  function onButtonClick() {
    const first = getFirstOccurrence(this.dataset.id);
    if (!first) return;

    // update url hash so navigating "back" in history will return user to button
    window.location.hash = this.dataset.id;
    // scroll to link
    const timeout = function () {
      goToElement(first, window.innerHeight * 0.5);
    };
    window.setTimeout(timeout, 0);
  }

  // get first occurrence of link to item in document
  function getFirstOccurrence(id) {
    let query = "a";
    query += '[href="#' + id + '"]';
    // exclude buttons, anchor links, toc links, etc
    query += ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    return document.querySelector(query);
  }

  // add button next to each reference entry, figure, or table
  function makeButtons(query, containerQuery, subject) {
    const elements = document.querySelectorAll(query);
    for (const element of elements) {
      const id = element.id;
      const buttonContainer = element.querySelector(containerQuery);
      const first = getFirstOccurrence(id);

      // if can't find link to reference or place to put button, ignore
      if (!first || !buttonContainer) continue;

      // make jump button
      let button = document.createElement("button");
      button.classList.add("icon_button", "jump_arrow");
      button.title = `Jump to the first occurrence of this ${subject} in the document`;
      const icon = document.querySelector(".icon_angle_double_up");
      button.innerHTML = icon.innerHTML;
      button.dataset.id = id;
      button.dataset.ignore = "true";
      button.addEventListener("click", onButtonClick);
      buttonContainer.prepend(button);
    }
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- angle double up icon -->

<template class="icon_angle_double_up">
  <!-- modified from: https://fontawesome.com/icons/angle-double-up -->
  <svg width="16" height="16" viewBox="0 0 320 512">
    <path
      fill="currentColor"
      d="M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* jump button */
    .jump_arrow {
      position: relative;
      top: 0.125em;
      margin-right: 5px;
    }
  }

  /* always hide jump button on print */
  @media only print {
    .jump_arrow {
      display: none;
    }
  }
</style>
<!-- 
    Lightbox Plugin

    Makes it such that when a user clicks on an image, the image fills the
    screen and the user can pan/drag/zoom the image and navigate between other
    images in the document.
-->

<script type="module">
  // list of possible zoom/scale factors
  const zooms =
    "0.1, 0.25, 0.333333, 0.5, 0.666666, 0.75, 1, 1.25, 1.5, 1.75, 2, 2.5, 3, 3.5, 4, 5, 6, 7, 8";
  // whether to fit image to view ('fit'), display at 100% and shrink if
  // necessary ('shrink'), or always display at 100% ('100')
  const defaultZoom = "fit";
  // whether to zoom in/out toward center of view ('true') or mouse ('false')
  const centerZoom = "false";

  // start script
  function start() {
    // run through each <img> element
    const imgs = document.querySelectorAll("figure > img");
    let count = 1;
    for (const img of imgs) {
      img.classList.add("lightbox_document_img");
      img.dataset.number = count;
      img.dataset.total = imgs.length;
      img.addEventListener("click", openLightbox);
      count++;
    }

    // attach mouse and key listeners to window
    window.addEventListener("mousemove", onWindowMouseMove);
    window.addEventListener("keyup", onKeyUp);
  }

  // when mouse is moved anywhere in window
  function onWindowMouseMove(event) {
    window.mouseX = event.clientX;
    window.mouseY = event.clientY;
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    switch (event.key) {
      // trigger click of prev button
      case "ArrowLeft":
        const prevButton = document.getElementById("lightbox_prev_button");
        if (prevButton) prevButton.click();
        break;
      // trigger click of next button
      case "ArrowRight":
        const nextButton = document.getElementById("lightbox_next_button");
        if (nextButton) nextButton.click();
        break;
      // close on esc
      case "Escape":
        closeLightbox();
        break;
    }
  }

  // open lightbox
  function openLightbox() {
    const lightbox = makeLightbox(this);
    if (!lightbox) return;

    blurBody(lightbox);
    document.body.appendChild(lightbox);
  }

  // make lightbox
  function makeLightbox(img) {
    // delete lightbox if it exists, start fresh
    closeLightbox();

    // create screen overlay containing lightbox
    const overlay = document.createElement("div");
    overlay.id = "lightbox_overlay";

    // create image info boxes
    const numberInfo = document.createElement("div");
    const zoomInfo = document.createElement("div");
    numberInfo.id = "lightbox_number_info";
    zoomInfo.id = "lightbox_zoom_info";

    // create container for image
    const imageContainer = document.createElement("div");
    imageContainer.id = "lightbox_image_container";
    const lightboxImg = makeLightboxImg(
      img,
      imageContainer,
      numberInfo,
      zoomInfo
    );
    imageContainer.appendChild(lightboxImg);

    // create bottom container for caption and navigation buttons
    const bottomContainer = document.createElement("div");
    bottomContainer.id = "lightbox_bottom_container";
    const caption = makeCaption(img);
    const prevButton = makePrevButton(img);
    const nextButton = makeNextButton(img);
    bottomContainer.appendChild(prevButton);
    bottomContainer.appendChild(caption);
    bottomContainer.appendChild(nextButton);

    // attach top middle and bottom to overlay
    overlay.appendChild(numberInfo);
    overlay.appendChild(zoomInfo);
    overlay.appendChild(imageContainer);
    overlay.appendChild(bottomContainer);

    return overlay;
  }

  // make <img> object that is intuitively draggable and zoomable
  function makeLightboxImg(sourceImg, container, numberInfoBox, zoomInfoBox) {
    // create copy of source <img>
    const img = sourceImg.cloneNode(true);
    img.classList.remove("lightbox_document_img");
    img.removeAttribute("id");
    img.removeAttribute("width");
    img.removeAttribute("height");
    img.style.position = "unset";
    img.style.margin = "0";
    img.style.padding = "0";
    img.style.width = "";
    img.style.height = "";
    img.style.minWidth = "";
    img.style.minHeight = "";
    img.style.maxWidth = "";
    img.style.maxHeight = "";
    img.id = "lightbox_img";

    // build sorted list of zoomSteps
    const zoomSteps = zooms.split(/[^0-9.]/).map((step) => parseFloat(step));
    zoomSteps.sort((a, b) => a - b);

    // <img> object property variables
    let zoom = 1;
    let translateX = 0;
    let translateY = 0;
    let clickMouseX = undefined;
    let clickMouseY = undefined;
    let clickTranslateX = undefined;
    let clickTranslateY = undefined;

    updateNumberInfo();

    // update image numbers displayed in info box
    function updateNumberInfo() {
      numberInfoBox.innerHTML =
        sourceImg.dataset.number + " of " + sourceImg.dataset.total;
    }

    // update zoom displayed in info box
    function updateZoomInfo() {
      let zoomInfo = zoom * 100;
      if (!Number.isInteger(zoomInfo)) zoomInfo = zoomInfo.toFixed(2);
      zoomInfoBox.innerHTML = zoomInfo + "%";
    }

    // move to closest zoom step above current zoom
    const zoomIn = function () {
      for (const zoomStep of zoomSteps) {
        if (zoomStep > zoom) {
          zoom = zoomStep;
          break;
        }
      }
      updateTransform();
    };

    // move to closest zoom step above current zoom
    const zoomOut = function () {
      zoomSteps.reverse();
      for (const zoomStep of zoomSteps) {
        if (zoomStep < zoom) {
          zoom = zoomStep;
          break;
        }
      }
      zoomSteps.reverse();

      updateTransform();
    };

    // update display of <img> based on scale/translate properties
    const updateTransform = function () {
      // set transform
      img.style.transform =
        "translate(" +
        (translateX || 0) +
        "px," +
        (translateY || 0) +
        "px) scale(" +
        (zoom || 1) +
        ")";

      // get new width/height after scale
      const rect = img.getBoundingClientRect();
      // limit translate
      translateX = Math.max(translateX, -rect.width / 2);
      translateX = Math.min(translateX, rect.width / 2);
      translateY = Math.max(translateY, -rect.height / 2);
      translateY = Math.min(translateY, rect.height / 2);

      // set transform
      img.style.transform =
        "translate(" +
        (translateX || 0) +
        "px," +
        (translateY || 0) +
        "px) scale(" +
        (zoom || 1) +
        ")";

      updateZoomInfo();
    };

    // fit <img> to container
    const fit = function () {
      // no x/y offset, 100% zoom by default
      translateX = 0;
      translateY = 0;
      zoom = 1;

      // widths of <img> and container
      const imgWidth = img.naturalWidth;
      const imgHeight = img.naturalHeight;
      const containerWidth = parseFloat(
        window.getComputedStyle(container).width
      );
      const containerHeight = parseFloat(
        window.getComputedStyle(container).height
      );

      // how much zooming is needed to fit <img> to container
      const xRatio = imgWidth / containerWidth;
      const yRatio = imgHeight / containerHeight;
      const maxRatio = Math.max(xRatio, yRatio);
      const newZoom = 1 / maxRatio;

      // fit <img> to container according to option
      if (defaultZoom === "shrink") {
        if (maxRatio > 1) zoom = newZoom;
      } else if (defaultZoom === "fit") zoom = newZoom;

      updateTransform();
    };

    // when mouse wheel is rolled anywhere in container
    const onContainerWheel = function (event) {
      if (!event) return;

      // let ctrl + mouse wheel to zoom behave as normal
      if (event.ctrlKey) return;

      // prevent normal scroll behavior
      event.preventDefault();
      event.stopPropagation();

      // point around which to scale img
      const viewRect = container.getBoundingClientRect();
      const viewX = (viewRect.left + viewRect.right) / 2;
      const viewY = (viewRect.top + viewRect.bottom) / 2;
      const originX = centerZoom === "true" ? viewX : mouseX;
      const originY = centerZoom === "true" ? viewY : mouseY;

      // get point on image under origin
      const oldRect = img.getBoundingClientRect();
      const oldPercentX = (originX - oldRect.left) / oldRect.width;
      const oldPercentY = (originY - oldRect.top) / oldRect.height;

      // increment/decrement zoom
      if (event.deltaY < 0) zoomIn();
      if (event.deltaY > 0) zoomOut();

      // get offset between previous image point and origin
      const newRect = img.getBoundingClientRect();
      const offsetX = originX - (newRect.left + newRect.width * oldPercentX);
      const offsetY = originY - (newRect.top + newRect.height * oldPercentY);

      // translate image to keep image point under origin
      translateX += offsetX;
      translateY += offsetY;

      // perform translate
      updateTransform();
    };

    // when container is clicked
    function onContainerClick(event) {
      // if container itself is target of click, and not other
      // element above it
      if (event.target === this) closeLightbox();
    }

    // when mouse button is pressed on image
    const onImageMouseDown = function (event) {
      // store original mouse position relative to image
      clickMouseX = window.mouseX;
      clickMouseY = window.mouseY;
      clickTranslateX = translateX;
      clickTranslateY = translateY;
      event.stopPropagation();
      event.preventDefault();
    };

    // when mouse button is released anywhere in window
    const onWindowMouseUp = function (event) {
      // reset original mouse position
      clickMouseX = undefined;
      clickMouseY = undefined;
      clickTranslateX = undefined;
      clickTranslateY = undefined;

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("mouseup", onWindowMouseUp);
    };

    // when mouse is moved anywhere in window
    const onWindowMouseMove = function (event) {
      if (
        clickMouseX === undefined ||
        clickMouseY === undefined ||
        clickTranslateX === undefined ||
        clickTranslateY === undefined
      )
        return;

      // offset image based on original and current mouse position
      translateX = clickTranslateX + window.mouseX - clickMouseX;
      translateY = clickTranslateY + window.mouseY - clickMouseY;
      updateTransform();
      event.preventDefault();

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("mousemove", onWindowMouseMove);
    };

    // when window is resized
    const onWindowResize = function (event) {
      fit();

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("resize", onWindowResize);
    };

    // attach the necessary event listeners
    img.addEventListener("dblclick", fit);
    img.addEventListener("mousedown", onImageMouseDown);
    container.addEventListener("wheel", onContainerWheel);
    container.addEventListener("mousedown", onContainerClick);
    container.addEventListener("touchstart", onContainerClick);
    window.addEventListener("mouseup", onWindowMouseUp);
    window.addEventListener("mousemove", onWindowMouseMove);
    window.addEventListener("resize", onWindowResize);

    // run fit() after lightbox atttached to document and <img> Loaded
    // so needed container and img dimensions available
    img.addEventListener("load", fit);

    return img;
  }

  // make caption
  function makeCaption(img) {
    const caption = document.createElement("div");
    caption.id = "lightbox_caption";
    const captionSource = img.nextElementSibling;
    if (captionSource.tagName.toLowerCase() === "figcaption") {
      const captionCopy = makeCopy(captionSource);
      caption.innerHTML = captionCopy.innerHTML;
    }

    caption.addEventListener("touchstart", function (event) {
      event.stopPropagation();
    });

    return caption;
  }

  // make carbon copy of html dom element
  function makeCopy(source) {
    const sourceCopy = source.cloneNode(true);

    // delete elements marked with ignore (eg anchor and jump buttons)
    const deleteFromCopy = sourceCopy.querySelectorAll('[data-ignore="true"]');
    for (const element of deleteFromCopy) element.remove();

    // delete certain element attributes
    const attributes = [
      "id",
      "data-collapsed",
      "data-selected",
      "data-highlighted",
      "data-glow",
    ];
    for (const attribute of attributes) {
      sourceCopy.removeAttribute(attribute);
      const elements = sourceCopy.querySelectorAll("[" + attribute + "]");
      for (const element of elements) element.removeAttribute(attribute);
    }

    return sourceCopy;
  }

  // make button to jump to previous image in document
  function makePrevButton(img) {
    const prevButton = document.createElement("button");
    prevButton.id = "lightbox_prev_button";
    prevButton.title = "Jump to the previous image in the document [←]";
    prevButton.classList.add("icon_button", "lightbox_button");
    prevButton.innerHTML = document.querySelector(".icon_caret_left").innerHTML;

    // attach click listeners to button
    prevButton.addEventListener("click", function () {
      getPrevImg(img).click();
    });

    return prevButton;
  }

  // make button to jump to next image in document
  function makeNextButton(img) {
    const nextButton = document.createElement("button");
    nextButton.id = "lightbox_next_button";
    nextButton.title = "Jump to the next image in the document [→]";
    nextButton.classList.add("icon_button", "lightbox_button");
    nextButton.innerHTML = document.querySelector(
      ".icon_caret_right"
    ).innerHTML;

    // attach click listeners to button
    nextButton.addEventListener("click", function () {
      getNextImg(img).click();
    });

    return nextButton;
  }

  // get previous image in document
  function getPrevImg(img) {
    const imgs = document.querySelectorAll(".lightbox_document_img");

    // find index of provided img
    let index;
    for (index = 0; index < imgs.length; index++) {
      if (imgs[index] === img) break;
    }

    // wrap index to other side if < 1
    if (index - 1 >= 0) index--;
    else index = imgs.length - 1;
    return imgs[index];
  }

  // get next image in document
  function getNextImg(img) {
    const imgs = document.querySelectorAll(".lightbox_document_img");

    // find index of provided img
    let index;
    for (index = 0; index < imgs.length; index++) {
      if (imgs[index] === img) break;
    }

    // wrap index to other side if > total
    if (index + 1 <= imgs.length - 1) index++;
    else index = 0;
    return imgs[index];
  }

  // close lightbox
  function closeLightbox() {
    focusBody();

    const lightbox = document.getElementById("lightbox_overlay");
    if (lightbox) lightbox.remove();
  }

  // make all elements behind lightbox non-focusable
  function blurBody(overlay) {
    const all = document.querySelectorAll("*");
    for (const element of all) element.tabIndex = -1;
    document.body.classList.add("body_no_scroll");
  }

  // make all elements focusable again
  function focusBody() {
    const all = document.querySelectorAll("*");
    for (const element of all) element.removeAttribute("tabIndex");
    document.body.classList.remove("body_no_scroll");
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
  <!-- modified from: https://fontawesome.com/icons/caret-left -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
    ></path>
  </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
  <!-- modified from: https://fontawesome.com/icons/caret-right -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* regular <img> in document when hovered */
    img.lightbox_document_img:hover {
      cursor: pointer;
    }

    .body_no_scroll {
      overflow: hidden !important;
    }

    /* screen overlay */
    #lightbox_overlay {
      display: flex;
      flex-direction: column;
      position: fixed;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.75);
      z-index: 3;
    }

    /* middle area containing lightbox image */
    #lightbox_image_container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
      padding: 20px;
    }

    /* bottom area containing caption */
    #lightbox_bottom_container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100px;
      min-height: 100px;
      max-height: 100px;
      background: rgba(0, 0, 0, 0.5);
    }

    /* image number info text box */
    #lightbox_number_info {
      position: absolute;
      color: #ffffff;
      font-weight: 600;
      left: 2px;
      top: 0;
      z-index: 4;
    }

    /* zoom info text box */
    #lightbox_zoom_info {
      position: absolute;
      color: #ffffff;
      font-weight: 600;
      right: 2px;
      top: 0;
      z-index: 4;
    }

    /* copy of image caption */
    #lightbox_caption {
      box-sizing: border-box;
      display: inline-block;
      width: 100%;
      max-height: 100%;
      padding: 10px 0;
      text-align: center;
      overflow-y: auto;
      color: #ffffff;
    }

    /* navigation previous/next button */
    .lightbox_button {
      width: 100px;
      height: 100%;
      min-width: 100px;
      min-height: 100%;
      color: #ffffff;
    }

    /* navigation previous/next button when hovered */
    .lightbox_button:hover {
      background: none !important;
    }

    /* navigation button icon */
    .lightbox_button > svg {
      height: 25px;
    }

    /* figure auto-number */
    #lightbox_caption > span:first-of-type {
      font-weight: bold;
      margin-right: 5px;
    }

    /* lightbox image when hovered */
    #lightbox_img:hover {
      cursor: grab;
    }

    /* lightbox image when grabbed */
    #lightbox_img:active {
      cursor: grabbing;
    }
  }

  /* when on screen < 480px wide */
  @media only screen and (max-width: 480px) {
    /* make navigation buttons skinnier on small screens to make more room for caption text */
    .lightbox_button {
      width: 50px;
      min-width: 50px;
    }
  }

  /* always hide lightbox on print */
  @media only print {
    #lightbox_overlay {
      display: none;
    }
  }
</style>
<!-- 
  Link Highlight Plugin

  Makes it such that when a user hovers or focuses a link, other links that have
  the same target will be highlighted. It also makes it such that when clicking
  a link, the target of the link (eg reference, figure, table) is briefly
  highlighted.
-->

<script type="module">
  // whether to also highlight links that go to external urls
  const externalLinks = "false";
  // whether user must click off to unhighlight instead of just
  // un-hovering
  const clickUnhighlight = "false";
  // whether to also highlight links that are unique
  const highlightUnique = "true";

  // start script
  function start() {
    const links = getLinks();
    for (const link of links) {
      // attach mouse and focus listeners to link
      link.addEventListener("mouseenter", onLinkFocus);
      link.addEventListener("focus", onLinkFocus);
      link.addEventListener("mouseleave", onLinkUnhover);
    }

    // attach click and hash change listeners to window
    window.addEventListener("click", onClick);
    window.addEventListener("touchstart", onClick);
    window.addEventListener("hashchange", onHashChange);

    // run hash change on window load in case user has navigated
    // directly to hash
    onHashChange();
  }

  // when link is focused (tabbed to) or hovered
  function onLinkFocus() {
    highlight(this);
  }

  // when link is unhovered
  function onLinkUnhover() {
    if (clickUnhighlight !== "true") unhighlightAll();
  }

  // when the mouse is clicked anywhere in window
  function onClick(event) {
    unhighlightAll();
  }

  // when hash (eg manuscript.html#introduction) changes
  function onHashChange() {
    const target = getHashTarget();
    if (target) glowElement(target);
  }

  // start glow sequence on an element
  function glowElement(element) {
    const startGlow = function () {
      onGlowEnd();
      element.dataset.glow = "true";
      element.addEventListener("animationend", onGlowEnd);
    };
    const onGlowEnd = function () {
      element.removeAttribute("data-glow");
      element.removeEventListener("animationend", onGlowEnd);
    };
    startGlow();
  }

  // highlight link and all others with same target
  function highlight(link) {
    // force unhighlight all to start fresh
    unhighlightAll();

    // get links with same target
    if (!link) return;
    const sameLinks = getSameLinks(link);

    // if link unique and option is off, exit and don't highlight
    if (sameLinks.length <= 1 && highlightUnique !== "true") return;

    // highlight all same links, and "select" (special highlight) this
    // one
    for (const sameLink of sameLinks) {
      if (sameLink === link) sameLink.setAttribute("data-selected", "true");
      else sameLink.setAttribute("data-highlighted", "true");
    }
  }

  // unhighlight all links
  function unhighlightAll() {
    const links = getLinks();
    for (const link of links) {
      link.setAttribute("data-selected", "false");
      link.setAttribute("data-highlighted", "false");
    }
  }

  // get links with same target
  function getSameLinks(link) {
    const results = [];
    const links = getLinks();
    for (const otherLink of links) {
      if (otherLink.getAttribute("href") === link.getAttribute("href"))
        results.push(otherLink);
    }
    return results;
  }

  // get all links of types we wish to handle
  function getLinks() {
    let query = "a";
    if (externalLinks !== "true") query += '[href^="#"]';
    // exclude buttons, anchor links, toc links, etc
    query += ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    return document.querySelectorAll(query);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<style>
  @media only screen {
    /* anything with data-highlighted attribute true */
    [data-highlighted="true"] {
      background: #ffeb3b;
    }

    /* anything with data-selected attribute true */
    [data-selected="true"] {
      background: #ff8a65 !important;
    }

    /* animation definition for glow */
    @keyframes highlight_glow {
      0% {
        background: none;
      }
      10% {
        background: #bbdefb;
      }
      100% {
        background: none;
      }
    }

    /* anything with data-glow attribute true */
    [data-glow="true"] {
      animation: highlight_glow 2s;
    }
  }
</style>
<!--
  Table of Contents Plugin

  Provides a "table of contents" (toc) panel on the side of the document that
  allows the user to conveniently navigate between sections of the document.
-->

<script type="module">
  // which types of elements to add links for, in "document.querySelector" format
  const typesQuery = "h1, h2, h3";
  // whether toc starts open. use 'true' or 'false', or 'auto' to
  // use 'true' behavior when screen wide enough and 'false' when not
  const startOpen = "false";
  // whether toc closes when clicking on toc link. use 'true' or
  // 'false', or 'auto' to use 'false' behavior when screen wide
  // enough and 'true' when not
  const clickClose = "auto";
  // if list item is more than this many characters, text will be
  // truncated
  const charLimit = "50";
  // whether or not to show bullets next to each toc item
  const bullets = "false";

  // start script
  function start() {
    // make toc panel and populate with entries (links to document
    // sections)
    const panel = makePanel();
    if (!panel) return;
    makeEntries(panel);
    // attach panel to document after making entries, so 'toc' heading
    // in panel isn't included in toc
    document.body.insertBefore(panel, document.body.firstChild);

    // initial panel state
    if (startOpen === "true" || (startOpen === "auto" && !isSmallScreen()))
      openPanel();
    else closePanel();

    // attach click, scroll, and hash change listeners to window
    window.addEventListener("click", onClick);
    window.addEventListener("scroll", onScroll);
    window.addEventListener("hashchange", onScroll);
    window.addEventListener("keyup", onKeyUp);
    onScroll();

    // add class to push document body down out of way of toc button
    document.body.classList.add("toc_body_nudge");
  }

  // determine if screen wide enough to fit toc panel
  function isSmallScreen() {
    // in default theme:
    // 816px = 8.5in = width of "page" (<body>) element
    // 260px = min width of toc panel (*2 for both sides of <body>)
    return window.innerWidth < 816 + 260 * 2;
  }

  // when mouse is clicked anywhere in window
  function onClick() {
    if (isSmallScreen()) closePanel();
  }

  // when window is scrolled or hash changed
  function onScroll() {
    highlightViewed();
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    // close on esc
    if (event.key === "Escape") closePanel();
  }

  // find entry of currently viewed document section in toc and highlight
  function highlightViewed() {
    const firstId = getFirstInView(typesQuery);

    // get toc entries (links), unhighlight all, then highlight viewed
    const list = document.getElementById("toc_list");
    if (!firstId || !list) return;
    const links = list.querySelectorAll("a");
    for (const link of links) link.dataset.viewing = "false";
    const link = list.querySelector('a[href="#' + firstId + '"]');
    if (!link) return;
    link.dataset.viewing = "true";
  }

  // get first or previous toc listed element in top half of view
  function getFirstInView(query) {
    // get all elements matching query and with id
    const elements = document.querySelectorAll(query);
    const elementsWithIds = [];
    for (const element of elements) {
      if (element.id) elementsWithIds.push(element);
    }

    // get first or previous element in top half of view
    for (let i = 0; i < elementsWithIds.length; i++) {
      const element = elementsWithIds[i];
      const prevElement = elementsWithIds[Math.max(0, i - 1)];
      if (element.getBoundingClientRect().top >= 0) {
        if (element.getBoundingClientRect().top < window.innerHeight / 2)
          return element.id;
        else return prevElement.id;
      }
    }
  }

  // make panel
  function makePanel() {
    // create panel
    const panel = document.createElement("div");
    panel.id = "toc_panel";
    if (bullets === "true") panel.dataset.bullets = "true";

    // create header
    const header = document.createElement("div");
    header.id = "toc_header";

    // create toc button
    const button = document.createElement("button");
    button.id = "toc_button";
    button.innerHTML = document.querySelector(".icon_th_list").innerHTML;
    button.title = "Table of Contents";
    button.classList.add("icon_button");

    // create header text
    const text = document.createElement("h4");
    text.innerHTML = "Table of Contents";

    // create container for toc list
    const list = document.createElement("div");
    list.id = "toc_list";

    // attach click listeners
    panel.addEventListener("click", onPanelClick);
    header.addEventListener("click", onHeaderClick);
    button.addEventListener("click", onButtonClick);

    // attach elements
    header.appendChild(button);
    header.appendChild(text);
    panel.appendChild(header);
    panel.appendChild(list);

    return panel;
  }

  // create toc entries (links) to each element of the specified types
  function makeEntries(panel) {
    const elements = document.querySelectorAll(typesQuery);
    for (const element of elements) {
      // do not add link if element doesn't have assigned id
      if (!element.id) continue;

      // create link/list item
      const link = document.createElement("a");
      link.classList.add("toc_link");
      switch (element.tagName.toLowerCase()) {
        case "h1":
          link.dataset.level = "1";
          break;
        case "h2":
          link.dataset.level = "2";
          break;
        case "h3":
          link.dataset.level = "3";
          break;
        case "h4":
          link.dataset.level = "4";
          break;
      }
      link.title = element.innerText;
      let text = element.innerText;
      if (text.length > charLimit) text = text.slice(0, charLimit) + "...";
      link.innerHTML = text;
      link.href = "#" + element.id;
      link.addEventListener("click", onLinkClick);

      // attach link
      panel.querySelector("#toc_list").appendChild(link);
    }
  }

  // when panel is clicked
  function onPanelClick(event) {
    // stop click from propagating to window/document and closing panel
    event.stopPropagation();
  }

  // when header itself is clicked
  function onHeaderClick(event) {
    togglePanel();
  }

  // when button is clicked
  function onButtonClick(event) {
    togglePanel();
    // stop header underneath button from also being clicked
    event.stopPropagation();
  }

  // when link is clicked
  function onLinkClick(event) {
    if (clickClose === "true" || (clickClose === "auto" && isSmallScreen()))
      closePanel();
    else openPanel();
  }

  // open panel if closed, close if opened
  function togglePanel() {
    const panel = document.getElementById("toc_panel");
    if (!panel) return;

    if (panel.dataset.open === "true") closePanel();
    else openPanel();
  }

  // open panel
  function openPanel() {
    const panel = document.getElementById("toc_panel");
    if (panel) panel.dataset.open = "true";
  }

  // close panel
  function closePanel() {
    const panel = document.getElementById("toc_panel");
    if (panel) panel.dataset.open = "false";
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- th list icon -->

<template class="icon_th_list">
  <!-- modified from: https://fontawesome.com/icons/th-list -->
  <svg width="16" height="16" viewBox="0 0 512 512" tabindex="-1">
    <path
      fill="currentColor"
      d="M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
      tabindex="-1"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* toc panel */
    #toc_panel {
      box-sizing: border-box;
      position: fixed;
      top: 0;
      left: 0;
      background: #ffffff;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      z-index: 2;
    }

    /* toc panel when closed */
    #toc_panel[data-open="false"] {
      min-width: 60px;
      width: 60px;
      height: 60px;
      border-right: solid 1px #bdbdbd;
      border-bottom: solid 1px #bdbdbd;
    }

    /* toc panel when open */
    #toc_panel[data-open="true"] {
      min-width: 260px;
      max-width: 480px;
      /* keep panel edge consistent distance away from "page" edge */
      width: calc(((100vw - 8.5in) / 2) - 30px - 40px);
      bottom: 0;
      border-right: solid 1px #bdbdbd;
    }

    /* toc panel header */
    #toc_header {
      box-sizing: border-box;
      display: flex;
      flex-direction: row;
      align-items: center;
      height: 60px;
      margin: 0;
      padding: 20px;
    }

    /* toc panel header when hovered */
    #toc_header:hover {
      cursor: pointer;
    }

    /* toc panel header when panel open */
    #toc_panel[data-open="true"] > #toc_header {
      border-bottom: solid 1px #bdbdbd;
    }

    /* toc open/close header button */
    #toc_button {
      margin-right: 20px;
    }

    /* hide toc list and header text when closed */
    #toc_panel[data-open="false"] > #toc_header > *:not(#toc_button),
    #toc_panel[data-open="false"] > #toc_list {
      display: none;
    }

    /* toc list of entries */
    #toc_list {
      box-sizing: border-box;
      width: 100%;
      padding: 20px;
      position: absolute;
      top: calc(60px + 1px);
      bottom: 0;
      overflow: auto;
    }

    /* toc entry, link to section in document */
    .toc_link {
      display: block;
      padding: 5px;
      position: relative;
      font-weight: 600;
      text-decoration: none;
    }

    /* toc entry when hovered or when "viewed" */
    .toc_link:hover,
    .toc_link[data-viewing="true"] {
      background: #f5f5f5;
    }

    /* toc entry, level 1 indentation */
    .toc_link[data-level="1"] {
      margin-left: 0;
    }

    /* toc entry, level 2 indentation */
    .toc_link[data-level="2"] {
      margin-left: 20px;
    }

    /* toc entry, level 3 indentation */
    .toc_link[data-level="3"] {
      margin-left: 40px;
    }

    /* toc entry, level 4 indentation */
    .toc_link[data-level="4"] {
      margin-left: 60px;
    }

    /* toc entry bullets */
    #toc_panel[data-bullets="true"] .toc_link[data-level]:before {
      position: absolute;
      left: -15px;
      top: -1px;
      font-size: 1.5em;
    }

    /* toc entry, level 2 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="2"]:before {
      content: "\2022";
    }

    /* toc entry, level 3 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="3"]:before {
      content: "\25AB";
    }

    /* toc entry, level 4 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="4"]:before {
      content: "-";
    }
  }

  /* when on screen < 8.5in wide */
  @media only screen and (max-width: 8.5in) {
    /* push <body> ("page") element down to make room for toc icon */
    .toc_body_nudge {
      padding-top: 60px;
    }

    /* toc icon when panel closed and not hovered */
    #toc_panel[data-open="false"]:not(:hover) {
      background: rgba(255, 255, 255, 0.75);
    }
  }

  /* always hide toc panel on print */
  @media only print {
    #toc_panel {
      display: none;
    }
  }
</style>
<!-- 
  Tooltips Plugin

  Makes it such that when the user hovers or focuses a link to a citation or
  figure, a tooltip appears with a preview of the reference content, along with
  arrows to navigate between instances of the same reference in the document.
-->

<script type="module">
  // whether user must click off to close tooltip instead of just un-hovering
  const clickClose = "false";
  // delay (in ms) between opening and closing tooltip
  const delay = "100";

  // start script
  function start() {
    const links = getLinks();
    for (const link of links) {
      // attach hover and focus listeners to link
      link.addEventListener("mouseover", onLinkHover);
      link.addEventListener("mouseleave", onLinkUnhover);
      link.addEventListener("focus", onLinkFocus);
      link.addEventListener("touchend", onLinkTouch);
    }

    // attach mouse, key, and resize listeners to window
    window.addEventListener("mousedown", onClick);
    window.addEventListener("touchstart", onClick);
    window.addEventListener("keyup", onKeyUp);
    window.addEventListener("resize", onResize);
  }

  // when link is hovered
  function onLinkHover() {
    // function to open tooltip
    const delayOpenTooltip = function () {
      openTooltip(this);
    }.bind(this);

    // run open function after delay
    this.openTooltipTimer = window.setTimeout(delayOpenTooltip, delay);
  }

  // when mouse leaves link
  function onLinkUnhover() {
    // cancel opening tooltip
    window.clearTimeout(this.openTooltipTimer);

    // don't close on unhover if option specifies
    if (clickClose === "true") return;

    // function to close tooltip
    const delayCloseTooltip = function () {
      // if tooltip open and if mouse isn't over tooltip, close
      const tooltip = document.getElementById("tooltip");
      if (tooltip && !tooltip.matches(":hover")) closeTooltip();
    };

    // run close function after delay
    this.closeTooltipTimer = window.setTimeout(delayCloseTooltip, delay);
  }

  // when link is focused (tabbed to)
  function onLinkFocus(event) {
    openTooltip(this);
  }

  // when link is touched on touch screen
  function onLinkTouch(event) {
    // attempt to force hover state on first tap always, and trigger
    // regular link click (and navigation) on second tap
    if (event.target === document.activeElement) event.target.click();
    else {
      document.activeElement.blur();
      event.target.focus();
    }
    if (event.cancelable) event.preventDefault();
    event.stopPropagation();
    return false;
  }

  // when mouse is clicked anywhere in window
  function onClick(event) {
    closeTooltip();
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    switch (event.key) {
      // trigger click of prev button
      case "ArrowLeft":
        const prevButton = document.getElementById("tooltip_prev_button");
        if (prevButton) prevButton.click();
        break;
      // trigger click of next button
      case "ArrowRight":
        const nextButton = document.getElementById("tooltip_next_button");
        if (nextButton) nextButton.click();
        break;
      // close on esc
      case "Escape":
        closeTooltip();
        break;
    }
  }

  // when window is resized or zoomed
  function onResize() {
    closeTooltip();
  }

  // get all links of types we wish to handle
  function getLinks() {
    const queries = [];
    // exclude buttons, anchor links, toc links, etc
    const exclude =
      ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    queries.push('a[href^="#ref-"]' + exclude); // citation links
    queries.push('a[href^="#fig:"]' + exclude); // figure links
    const query = queries.join(", ");
    return document.querySelectorAll(query);
  }

  // get links with same target, get index of link in set, get total
  // same links
  function getSameLinks(link) {
    const sameLinks = [];
    const links = getLinks();
    for (const otherLink of links) {
      if (otherLink.getAttribute("href") === link.getAttribute("href"))
        sameLinks.push(otherLink);
    }

    return {
      elements: sameLinks,
      index: sameLinks.indexOf(link),
      total: sameLinks.length,
    };
  }

  // open tooltip
  function openTooltip(link) {
    // delete tooltip if it exists, start fresh
    closeTooltip();

    // make tooltip element
    const tooltip = makeTooltip(link);

    // if source couldn't be found and tooltip not made, exit
    if (!tooltip) return;

    // make navbar elements
    const navBar = makeNavBar(link);
    if (navBar) tooltip.firstElementChild.appendChild(navBar);

    // attach tooltip to page
    document.body.appendChild(tooltip);

    // position tooltip
    const position = function () {
      positionTooltip(link);
    };
    position();

    // if tooltip contains images, position again after they've loaded
    const imgs = tooltip.querySelectorAll("img");
    for (const img of imgs) img.addEventListener("load", position);
  }

  // close (delete) tooltip
  function closeTooltip() {
    const tooltip = document.getElementById("tooltip");
    if (tooltip) tooltip.remove();
  }

  // make tooltip
  function makeTooltip(link) {
    // get target element that link points to
    const source = getSource(link);

    // if source can't be found, exit
    if (!source) return;

    // create new tooltip
    const tooltip = document.createElement("div");
    tooltip.id = "tooltip";
    const tooltipContent = document.createElement("div");
    tooltipContent.id = "tooltip_content";
    tooltip.appendChild(tooltipContent);

    // make copy of source node and put in tooltip
    const sourceCopy = makeCopy(source);
    tooltipContent.appendChild(sourceCopy);

    // attach mouse event listeners
    tooltip.addEventListener("click", onTooltipClick);
    tooltip.addEventListener("mousedown", onTooltipClick);
    tooltip.addEventListener("touchstart", onTooltipClick);
    tooltip.addEventListener("mouseleave", onTooltipUnhover);

    // (for interaction with lightbox plugin)
    // transfer click on tooltip copied img to original img
    const sourceImg = source.querySelector("img");
    const sourceCopyImg = sourceCopy.querySelector("img");
    if (sourceImg && sourceCopyImg) {
      const clickImg = function () {
        sourceImg.click();
        closeTooltip();
      };
      sourceCopyImg.addEventListener("click", clickImg);
    }

    return tooltip;
  }

  // make carbon copy of html dom element
  function makeCopy(source) {
    const sourceCopy = source.cloneNode(true);

    // delete elements marked with ignore (eg anchor and jump buttons)
    const deleteFromCopy = sourceCopy.querySelectorAll('[data-ignore="true"]');
    for (const element of deleteFromCopy) element.remove();

    // delete certain element attributes
    const attributes = [
      "id",
      "data-collapsed",
      "data-selected",
      "data-highlighted",
      "data-glow",
      "class",
    ];
    for (const attribute of attributes) {
      sourceCopy.removeAttribute(attribute);
      const elements = sourceCopy.querySelectorAll("[" + attribute + "]");
      for (const element of elements) element.removeAttribute(attribute);
    }

    return sourceCopy;
  }

  // when tooltip is clicked
  function onTooltipClick(event) {
    // when user clicks on tooltip, stop click from transferring
    // outside of tooltip (eg, click off to close tooltip, or eg click
    // off to unhighlight same refs)
    event.stopPropagation();
  }

  // when tooltip is unhovered
  function onTooltipUnhover(event) {
    if (clickClose === "true") return;

    // make sure new mouse/touch/focus no longer over tooltip or any
    // element within it
    const tooltip = document.getElementById("tooltip");
    if (!tooltip) return;
    if (this.contains(event.relatedTarget)) return;

    closeTooltip();
  }

  // make nav bar to go betwen prev/next instances of same reference
  function makeNavBar(link) {
    // find other links to the same source
    const sameLinks = getSameLinks(link);

    // don't show nav bar when singular reference
    if (sameLinks.total <= 1) return;

    // find prev/next links with same target
    const prevLink = getPrevLink(link, sameLinks);
    const nextLink = getNextLink(link, sameLinks);

    // create nav bar
    const navBar = document.createElement("div");
    navBar.id = "tooltip_nav_bar";
    const text = sameLinks.index + 1 + " of " + sameLinks.total;

    // create nav bar prev/next buttons
    const prevButton = document.createElement("button");
    const nextButton = document.createElement("button");
    prevButton.id = "tooltip_prev_button";
    nextButton.id = "tooltip_next_button";
    prevButton.title =
      "Jump to the previous occurence of this item in the document [←]";
    nextButton.title =
      "Jump to the next occurence of this item in the document [→]";
    prevButton.classList.add("icon_button");
    nextButton.classList.add("icon_button");
    prevButton.innerHTML = document.querySelector(".icon_caret_left").innerHTML;
    nextButton.innerHTML =
      document.querySelector(".icon_caret_right").innerHTML;
    navBar.appendChild(prevButton);
    navBar.appendChild(document.createTextNode(text));
    navBar.appendChild(nextButton);

    // attach click listeners to buttons
    prevButton.addEventListener("click", function () {
      onPrevNextClick(link, prevLink);
    });
    nextButton.addEventListener("click", function () {
      onPrevNextClick(link, nextLink);
    });

    return navBar;
  }

  // get previous link with same target
  function getPrevLink(link, sameLinks) {
    if (!sameLinks) sameLinks = getSameLinks(link);
    // wrap index to other side if < 1
    let index;
    if (sameLinks.index - 1 >= 0) index = sameLinks.index - 1;
    else index = sameLinks.total - 1;
    return sameLinks.elements[index];
  }

  // get next link with same target
  function getNextLink(link, sameLinks) {
    if (!sameLinks) sameLinks = getSameLinks(link);
    // wrap index to other side if > total
    let index;
    if (sameLinks.index + 1 <= sameLinks.total - 1) index = sameLinks.index + 1;
    else index = 0;
    return sameLinks.elements[index];
  }

  // get element that is target of link or url hash
  function getSource(link) {
    const hash = link ? link.hash : window.location.hash;
    const id = hash.slice(1);
    let target = document.querySelector('[id="' + id + '"]');
    if (!target) return;

    // if ref or figure, modify target to get expected element
    if (id.indexOf("ref-") === 0) target = target.querySelector(":nth-child(2)");
    else if (id.indexOf("fig:") === 0) target = target.querySelector("figure");

    return target;
  }

  // when prev/next arrow button is clicked
  function onPrevNextClick(link, prevNextLink) {
    if (link && prevNextLink)
      goToElement(prevNextLink, window.innerHeight * 0.5);
  }

  // scroll to and focus element
  function goToElement(element, offset) {
    // expand accordion section if collapsed
    expandElement(element);
    const y =
      getRectInView(element).top -
      getRectInView(document.documentElement).top -
      (offset || 0);
    // trigger any function listening for "onscroll" event
    window.dispatchEvent(new Event("scroll"));
    window.scrollTo(0, y);
    document.activeElement.blur();
    element.focus();
  }

  // determine position to place tooltip based on link position in
  // viewport and tooltip size
  function positionTooltip(link, left, top) {
    const tooltipElement = document.getElementById("tooltip");
    if (!tooltipElement) return;

    // get convenient vars for position/dimensions of
    // link/tooltip/page/view
    link = getRectInPage(link);
    const tooltip = getRectInPage(tooltipElement);
    const view = getRectInPage();

    // horizontal positioning
    if (left)
      // use explicit value
      left = left;
    else if (link.left + tooltip.width < view.right)
      // fit tooltip to right of link
      left = link.left;
    else if (link.right - tooltip.width > view.left)
      // fit tooltip to left of link
      left = link.right - tooltip.width;
    // center tooltip in view
    else left = (view.right - view.left) / 2 - tooltip.width / 2;

    // vertical positioning
    if (top)
      // use explicit value
      top = top;
    else if (link.top - tooltip.height > view.top)
      // fit tooltip above link
      top = link.top - tooltip.height;
    else if (link.bottom + tooltip.height < view.bottom)
      // fit tooltip below link
      top = link.bottom;
    else {
      // center tooltip in view
      top = view.top + view.height / 2 - tooltip.height / 2;
      // nudge off of link to left/right if possible
      if (link.right + tooltip.width < view.right) left = link.right;
      else if (link.left - tooltip.width > view.left)
        left = link.left - tooltip.width;
    }

    tooltipElement.style.left = left + "px";
    tooltipElement.style.top = top + "px";
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
  <!-- modified from: https://fontawesome.com/icons/caret-left -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
    ></path>
  </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
  <!-- modified from: https://fontawesome.com/icons/caret-right -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* tooltip container */
    #tooltip {
      position: absolute;
      width: 50%;
      min-width: 240px;
      max-width: 75%;
      z-index: 1;
    }

    /* tooltip content */
    #tooltip_content {
      margin-bottom: 5px;
      padding: 20px;
      border-radius: 5px;
      border: solid 1px #bdbdbd;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background: #ffffff;
      overflow-wrap: break-word;
    }

    /* tooltip copy of paragraphs and figures */
    #tooltip_content > p,
    #tooltip_content > figure {
      margin: 0;
      max-height: 320px;
      overflow-y: auto;
    }

    /* tooltip copy of <img> */
    #tooltip_content > figure > img,
    #tooltip_content > figure > svg {
      max-height: 260px;
    }

    /* navigation bar */
    #tooltip_nav_bar {
      margin-top: 10px;
      text-align: center;
    }

    /* navigation bar previous/next buton */
    #tooltip_nav_bar > .icon_button {
      position: relative;
      top: 3px;
    }

    /* navigation bar previous button */
    #tooltip_nav_bar > .icon_button:first-of-type {
      margin-right: 5px;
    }

    /* navigation bar next button */
    #tooltip_nav_bar > .icon_button:last-of-type {
      margin-left: 5px;
    }
  }

  /* always hide tooltip on print */
  @media only print {
    #tooltip {
      display: none;
    }
  }
</style>
<!--
  Analytics Plugin (third-party) 
  
  Copy and paste code from Google Analytics or similar service here.
-->
<!-- 
  Annotations Plugin

  Allows public annotation of the  manuscript. See https://web.hypothes.is/.
-->

<script type="module">
  // configuration
  window.hypothesisConfig = function () {
    return {
      branding: {
        accentColor: "#2196f3",
        appBackgroundColor: "#f8f8f8",
        ctaBackgroundColor: "#f8f8f8",
        ctaTextColor: "#000000",
        selectionFontFamily: "Open Sans, Helvetica, sans serif",
        annotationFontFamily: "Open Sans, Helvetica, sans serif",
      },
    };
  };

  // hypothesis client script
  const embed = "https://hypothes.is/embed.js";
  // hypothesis annotation count query url
  const query = "https://api.hypothes.is/api/search?limit=0&url=";

  // start script
  function start() {
    const button = makeButton();
    document.body.insertBefore(button, document.body.firstChild);
    insertCount(button);
  }

  // make button
  function makeButton() {
    // create button
    const button = document.createElement("button");
    button.id = "hypothesis_button";
    button.innerHTML = document.querySelector(".icon_hypothesis").innerHTML;
    button.title = "Hypothesis annotations";
    button.classList.add("icon_button");

    function onClick(event) {
      onButtonClick(event, button);
    }

    // attach click listeners
    button.addEventListener("click", onClick);

    return button;
  }

  // insert annotations count
  async function insertCount(button) {
    // get annotation count from Hypothesis based on url
    let count = "-";
    try {
      const canonical = document.querySelector('link[rel="canonical"]');
      const location = window.location;
      const url = encodeURIComponent((canonical || location).href);
      const response = await fetch(query + url);
      const json = await response.json();
      count = json.total || "-";
    } catch (error) {
      console.log(error);
    }

    // put count into button
    const counter = document.createElement("span");
    counter.id = "hypothesis_count";
    counter.innerHTML = count;
    button.title = "View " + count + " Hypothesis annotations";
    button.append(counter);
  }

  // when button is clicked
  function onButtonClick(event, button) {
    const script = document.createElement("script");
    script.src = embed;
    document.body.append(script);
    button.remove();
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- hypothesis icon -->

<template class="icon_hypothesis">
  <!-- modified from: https://simpleicons.org/icons/hypothesis.svg / https://git.io/Jf1VB -->
  <svg width="16" height="16" viewBox="0 0 24 24" tabindex="-1">
    <path
      fill="currentColor"
      d="M3.43 0C2.5 0 1.72 .768 1.72 1.72V18.86C1.72 19.8 2.5 20.57 3.43 20.57H9.38L12 24L14.62 20.57H20.57C21.5 20.57 22.29 19.8 22.29 18.86V1.72C22.29 .77 21.5 0 20.57 0H3.43M5.14 3.43H7.72V9.43S8.58 7.72 10.28 7.72C12 7.72 13.74 8.57 13.74 11.24V17.14H11.16V12C11.16 10.61 10.28 10.07 9.43 10.29C8.57 10.5 7.72 11.41 7.72 13.29V17.14H5.14V3.43M18 13.72C18.95 13.72 19.72 14.5 19.72 15.42A1.71 1.71 0 0 1 18 17.13A1.71 1.71 0 0 1 16.29 15.42C16.29 14.5 17.05 13.71 18 13.71Z"
      tabindex="-1"
    ></path>
  </svg>
</template>

<style>
  /* hypothesis activation button */
  #hypothesis_button {
    box-sizing: border-box;
    position: fixed;
    top: 0;
    right: 0;
    width: 60px;
    height: 60px;
    background: #ffffff;
    border-radius: 0;
    border-left: solid 1px #bdbdbd;
    border-bottom: solid 1px #bdbdbd;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
    z-index: 2;
  }

  /* hypothesis button svg */
  #hypothesis_button > svg {
    position: relative;
    top: -4px;
  }

  /* hypothesis annotation count */
  #hypothesis_count {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 5px;
  }

  /* side panel */
  .annotator-frame {
    width: 280px !important;
  }

  /* match highlight color to rest of theme */
  .annotator-highlights-always-on .annotator-hl {
    background-color: #ffeb3b !important;
  }

  /* match focused color to rest of theme */
  .annotator-hl.annotator-hl-focused {
    background-color: #ff8a65 !important;
  }

  /* match bucket bar color to rest of theme */
  .annotator-bucket-bar {
    background: #f5f5f5 !important;
  }

  /* always hide button, toolbar, and tooltip on print */
  @media only print {
    #hypothesis_button {
      display: none;
    }

    .annotator-frame {
      display: none !important;
    }

    hypothesis-adder {
      display: none !important;
    }
  }
</style>
<!-- 
  Mathjax Plugin (third-party) 

  Allows the proper rendering of math/equations written in LaTeX.
  See https://www.mathjax.org/.
-->

<script type="text/x-mathjax-config">
  // configuration
  MathJax.Hub.Config({
    "CommonHTML": { linebreaks: { automatic: true } },
    "HTML-CSS": { linebreaks: { automatic: true } },
    "SVG": { linebreaks: { automatic: true } },
    "fast-preview": { disabled: true }
  });
</script>

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"
  integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A=="
  crossorigin="anonymous"
></script>

<style>
  /* mathjax containers */
  .math.display > span:not(.MathJax_Preview) {
    /* turn inline element (no dimensions) into block (allows fixed width and thus scrolling) */
    display: flex !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    justify-content: center;
    align-items: center;
    margin: 0 !important;
  }

  /* right click menu */
  .MathJax_Menu {
    border-radius: 5px !important;
    border: solid 1px #bdbdbd !important;
    box-shadow: none !important;
  }

  /* equation auto-number */
  span[id^="eq:"] > span.math.display + span {
    font-weight: 600;
  }

  /* equation */
  span[id^="eq:"] > span.math.display > span {
    /* nudge to make room for equation auto-number and anchor */
    margin-right: 60px !important;
  }
</style>
</body>
</html>
